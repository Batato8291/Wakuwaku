(self["webpackChunkwakuwaku"]=self["webpackChunkwakuwaku"]||[]).push([[709],{3863:function(e,a,n){
/*!
  * Bootstrap collapse.js v5.2.0-beta1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(a,o){e.exports=o(n(4072),n(9286),n(8737),n(5695))})(0,(function(e,a,n,o){"use strict";const c=e=>e&&"object"===typeof e&&"default"in e?e:{default:e},d=c(a),t=c(n),s=c(o),l="collapse",m="bs.collapse",i=`.${m}`,r=".data-api",u=`show${i}`,h=`shown${i}`,p=`hide${i}`,g=`hidden${i}`,_=`click${i}${r}`,f="show",v="collapse",b="collapsing",y="collapsed",w=`:scope .${v} .${v}`,x="collapse-horizontal",C="width",k="height",$=".collapse.show, .collapse.collapsing",A='[data-bs-toggle="collapse"]',L={toggle:!0,parent:null},V={toggle:"boolean",parent:"(null|element)"};class D extends s.default{constructor(a,n){super(a,n),this._isTransitioning=!1,this._triggerArray=[];const o=t.default.find(A);for(const c of o){const a=e.getSelectorFromElement(c),n=t.default.find(a).filter((e=>e===this._element));null!==a&&n.length&&this._triggerArray.push(c)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return L}static get DefaultType(){return V}static get NAME(){return l}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren($).filter((e=>e!==this._element)).map((e=>D.getOrCreateInstance(e,{toggle:!1})))),e.length&&e[0]._isTransitioning)return;const a=d.default.trigger(this._element,u);if(a.defaultPrevented)return;for(const d of e)d.hide();const n=this._getDimension();this._element.classList.remove(v),this._element.classList.add(b),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(b),this._element.classList.add(v,f),this._element.style[n]="",d.default.trigger(this._element,h)},c=n[0].toUpperCase()+n.slice(1),t=`scroll${c}`;this._queueCallback(o,this._element,!0),this._element.style[n]=`${this._element[t]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const a=d.default.trigger(this._element,p);if(a.defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,e.reflow(this._element),this._element.classList.add(b),this._element.classList.remove(v,f);for(const c of this._triggerArray){const a=e.getElementFromSelector(c);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([c],!1)}this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(b),this._element.classList.add(v),d.default.trigger(this._element,g)};this._element.style[n]="",this._queueCallback(o,this._element,!0)}_isShown(e=this._element){return e.classList.contains(f)}_configAfterMerge(a){return a.toggle=Boolean(a.toggle),a.parent=e.getElement(a.parent),a}_getDimension(){return this._element.classList.contains(x)?C:k}_initializeChildren(){if(!this._config.parent)return;const a=this._getFirstLevelChildren(A);for(const n of a){const a=e.getElementFromSelector(n);a&&this._addAriaAndCollapsedClass([n],this._isShown(a))}}_getFirstLevelChildren(e){const a=t.default.find(w,this._config.parent);return t.default.find(e,this._config.parent).filter((e=>!a.includes(e)))}_addAriaAndCollapsedClass(e,a){if(e.length)for(const n of e)n.classList.toggle(y,!a),n.setAttribute("aria-expanded",a)}static jQueryInterface(e){const a={};return"string"===typeof e&&/show|hide/.test(e)&&(a.toggle=!1),this.each((function(){const n=D.getOrCreateInstance(this,a);if("string"===typeof e){if("undefined"===typeof n[e])throw new TypeError(`No method named "${e}"`);n[e]()}}))}}return d.default.on(document,_,A,(function(a){("A"===a.target.tagName||a.delegateTarget&&"A"===a.delegateTarget.tagName)&&a.preventDefault();const n=e.getSelectorFromElement(this),o=t.default.find(n);for(const e of o)D.getOrCreateInstance(e,{toggle:!1}).toggle()})),e.defineJQueryPlugin(D),D}))},1339:function(e,a,n){"use strict";var o=n(7424),c=n.n(o);a["Z"]={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(c())(this.$refs.modal)}}},4709:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return Ne}});var o=n(6252),c=n(9963),d=n(3577);const t=e=>((0,o.dD)("data-v-2ccc6ac0"),e=e(),(0,o.Cn)(),e),s={class:"container"},l=(0,o.uE)('<div data-v-2ccc6ac0><p class="fs-1 fw-bold text-center" style="color:#faa11f;" data-v-2ccc6ac0>訂單資料</p><div class="col-12 col-lg-10 mx-lg-auto" data-v-2ccc6ac0><ul class="multi-steps" data-v-2ccc6ac0><li class="active" id="progressbar_cart" data-v-2ccc6ac0><span data-v-2ccc6ac0>購物車</span></li><li id="progressbar_order" class="active" data-v-2ccc6ac0><span data-v-2ccc6ac0>訂單資料</span></li><li id="progressbar_check" data-v-2ccc6ac0><span data-v-2ccc6ac0>確認訂單</span></li><li id="progressbar_done" data-v-2ccc6ac0><span data-v-2ccc6ac0>完成訂單</span></li></ul></div></div>',1),m={key:0,class:"d-flex align-item-center flex-column"},i=t((()=>(0,o._)("div",{class:"mb-1",style:{"min-height":"0.5rem","background-color":"rgba(255, 173, 59, 0.856)"}},null,-1))),r=t((()=>(0,o._)("div",{class:"lg-list-item p-2 mt-3 fs-2 fw-bold text-center",style:{color:"gray"}}," 訂單沒有內容 . . . ",-1))),u={class:"d-flex justify-content-center mt-3 mb-5"},h=(0,o.Uk)(" 前往商店 "),p=t((()=>(0,o._)("i",{class:"bi bi-arrow-bar-right"},null,-1))),g={key:1,class:"row justify-content-center"},_={class:"col-12 col-lg-5 px-3"},f=t((()=>(0,o._)("div",{class:"mb-1",style:{"min-height":"0.5rem","background-color":"rgba(255, 173, 59, 0.856)"}},null,-1))),v={class:"accordion mx-1",id:"accordionOrder"},b={class:"accordion-item order-list"},y=t((()=>(0,o._)("h2",{class:"accordion-header",style:{"border-bottom":"2px solid #535353"}},[(0,o._)("button",{class:"accordion-button collapsed px-3 py-2 order-list-btn",type:"button","data-bs-toggle":"collapse","data-bs-target":"#order-accordion","aria-expanded":"false","aria-controls":"#order-accordion"},[(0,o._)("p",{class:"fs-3"},"訂單內容")])],-1))),w={id:"order-accordion",class:"accordion-collapse collapse show","data-bs-parent":"#accordionOrder"},x={class:"accordion-body p-0"},C={class:"lg-list"},k={class:"col-1 d-flex justify-content-center align-item-center"},$=["onClick"],A=t((()=>(0,o._)("i",{class:"bi bi-x"},null,-1))),L=[A],V={class:"product-img col-2"},D=["src"],T={class:"w-100 ps-2 col"},F={class:"fs-5 m-0"},S={class:"my-1"},U={class:"d-flex flex-column align-items-end justify-content-center col-2"},M={key:0,class:"text-secondary mb-2"},W={class:"p-2"},z={class:"px-3 my-2"},E={class:"input-group coupon-input"},q=["disabled"],P=["disabled"],j={key:0,class:"text-center"},O=t((()=>(0,o._)("div",{class:"spinner-border spinner-border-sm text-light",role:"status"},[(0,o._)("span",{class:"visually-hidden"},"Loading...")],-1))),I=[O],N={key:1},H={key:0,class:"text-danger mt-1"},K={class:"list-unstyled px-2"},Y={class:"d-flex justify-content-between mb-1"},Z=t((()=>(0,o._)("span",null,"小計",-1))),B={class:"d-flex justify-content-between mb-1"},J=t((()=>(0,o._)("span",null,"運費",-1))),Q={key:0,class:"d-flex justify-content-between mb-1"},R={class:"text-success fw-bold"},G=t((()=>(0,o._)("hr",{class:"my-2"},null,-1))),X={class:"d-flex justify-content-between mb-1 fw-bold"},ee=t((()=>(0,o._)("span",null,"應付總額",-1))),ae={class:"text-danger"},ne={class:"col-12 col-lg-5 px-3"},oe=t((()=>(0,o._)("div",{class:"",style:{"min-height":"0.5rem","background-color":"rgba(255, 173, 59, 0.856)"}},null,-1))),ce=t((()=>(0,o._)("div",{class:"mb-2 mx-1",style:{"border-bottom":"2px solid #535353"}},[(0,o._)("p",{class:"fs-3 my-1 text-center"},"訂單資料")],-1))),de={class:"px-2"},te={class:"mb-2"},se=t((()=>(0,o._)("label",{for:"email",class:"form-label"},[(0,o._)("span",{class:"text-danger"},"*"),(0,o.Uk)(" Email")],-1))),le={class:"mb-2"},me=t((()=>(0,o._)("label",{for:"name",class:"form-label"},[(0,o._)("span",{class:"text-danger"},"*"),(0,o.Uk)(" 收件人姓名")],-1))),ie={class:"mb-2"},re=t((()=>(0,o._)("label",{for:"tel",class:"form-label"},[(0,o._)("span",{class:"text-danger"},"*"),(0,o.Uk)(" 收件人電話")],-1))),ue={class:"mb-2"},he=t((()=>(0,o._)("label",{for:"address",class:"form-label"},[(0,o._)("span",{class:"text-danger"},"*"),(0,o.Uk)(" 收件人地址")],-1))),pe={class:"row mb-2"},ge={class:"col-6"},_e=t((()=>(0,o._)("option",{value:"",selected:"",disabled:""},"請選擇縣市",-1))),fe=["value"],ve={class:"col-6"},be=t((()=>(0,o._)("option",{value:"",selected:"",disabled:""},"請選擇區域",-1))),ye=["value"],we={class:"mb-2"},xe=t((()=>(0,o._)("label",{for:"address",class:"form-label"},[(0,o._)("span",{class:"text-danger"},"*"),(0,o.Uk)(" 付款方式")],-1))),Ce=t((()=>(0,o._)("option",{value:""},"請選擇付款方式",-1))),ke=t((()=>(0,o._)("option",{value:"credit_card"},"信用卡付款 $60",-1))),$e=t((()=>(0,o._)("option",{value:"atm"},"ATM轉帳 $60",-1))),Ae=t((()=>(0,o._)("option",{value:"mart"},"超商取貨付款 $75",-1))),Le=t((()=>(0,o._)("option",{value:"home_delivery"},"宅配付款 $100",-1))),Ve={class:"mb-2"},De=t((()=>(0,o._)("label",{for:"message",class:"form-label"},"留言",-1))),Te={class:"text-end mt-3"},Fe=["disabled"],Se={class:"modal fade",tabindex:"-1",ref:"modal"},Ue={class:"modal-dialog modal-dialog-centered"},Me={class:"modal-content"},We=t((()=>(0,o._)("div",{class:"modal-body p-4 text-center fs-5 fw-bold"}," 訂單尚未完成，確定要離開嗎？ ",-1))),ze={class:"leave-btn-group"};function Ee(e,a,n,t,A,O){const Ee=(0,o.up)("router-link"),qe=(0,o.up)("VField"),Pe=(0,o.up)("ErrorMessage"),je=(0,o.up)("VForm");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",s,[l,0===A.carts.length?((0,o.wg)(),(0,o.iD)("div",m,[i,r,(0,o._)("div",u,[(0,o.Wm)(Ee,{class:"btn text-white fw-semibold shadow-none",to:"/search?search=&category=all",style:{"background-color":"rgb(251 164 59)"}},{default:(0,o.w5)((()=>[h,p])),_:1})])])):((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("div",_,[f,(0,o._)("div",v,[(0,o._)("div",b,[y,(0,o._)("div",w,[(0,o._)("div",x,[(0,o._)("div",C,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(A.carts,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"lg-list-item d-flex flex-row p-2 list-item-border",key:e.id},[(0,o._)("div",k,[(0,o._)("button",{class:"px-1 py-0 btn btn-outline-danger align-self-center",onClick:(0,c.iM)((a=>O.deleteCart(e.id)),["prevent"])},L,8,$)]),(0,o._)("div",V,[(0,o._)("img",{class:"",src:e.product.images[0],alt:"product image"},null,8,D)]),(0,o._)("div",T,[(0,o._)("p",F,(0,d.zw)(e.product.title),1),(0,o._)("div",S,"x "+(0,d.zw)(e.qty),1)]),(0,o._)("div",U,[A.isCoupon?((0,o.wg)(),(0,o.iD)("del",M,"$ "+(0,d.zw)(e.total),1)):(0,o.kq)("",!0),(0,o._)("span",null,"$ "+(0,d.zw)(Math.round(e.final_total)),1)])])))),128))])])])])]),(0,o._)("div",W,[(0,o._)("div",z,[(0,o._)("div",E,[(0,o.wy)((0,o._)("input",{type:"text ",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":a[0]||(a[0]=e=>A.coupon_code=e),onKeyup:a[1]||(a[1]=(0,c.D2)(((...e)=>O.addCouponCode&&O.addCouponCode(...e)),["enter"])),disabled:0===A.carts.length},null,40,q),[[c.nr,A.coupon_code]]),(0,o._)("button",{class:(0,d.C_)(["btn btn-outline-warning",{active:A.isLoading}]),type:"button",id:"button-addon2",onClick:a[2]||(a[2]=(...e)=>O.addCouponCode&&O.addCouponCode(...e)),disabled:0===A.carts.length},[A.isLoading?((0,o.wg)(),(0,o.iD)("div",j,I)):((0,o.wg)(),(0,o.iD)("span",N,"套用"))],10,P)]),A.couponSuccess?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",H,(0,d.zw)(e.errorMessage),1))]),(0,o._)("ul",K,[(0,o._)("li",Y,[Z,(0,o._)("span",null,"$"+(0,d.zw)(O.totalAmount.total),1)]),(0,o._)("li",B,[J,(0,o._)("span",null,"$"+(0,d.zw)(A.shippingFee),1)]),A.isCoupon?((0,o.wg)(),(0,o.iD)("li",Q,[(0,o._)("span",null,(0,d.zw)(A.carts[0].coupon.title)+" 折扣",1),(0,o._)("span",R,"- $"+(0,d.zw)(O.totalAmount.discount),1)])):(0,o.kq)("",!0),G,(0,o._)("li",X,[ee,(0,o._)("span",ae,"$ "+(0,d.zw)(O.totalAmount.finalTotal+A.shippingFee),1)])])])]),(0,o._)("div",ne,[oe,ce,(0,o._)("div",de,[(0,o.Wm)(je,{class:"order-form",onSubmit:O.createOrder},{default:(0,o.w5)((({errors:e})=>[(0,o._)("div",te,[se,(0,o.Wm)(qe,{id:"email",name:"email",type:"email",class:(0,d.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:A.form.user.email,"onUpdate:modelValue":a[3]||(a[3]=e=>A.form.user.email=e)},null,8,["class","modelValue"]),(0,o.Wm)(Pe,{name:"email",class:"invalid-feedback"})]),(0,o._)("div",le,[me,(0,o.Wm)(qe,{id:"name",name:"姓名",type:"text",class:(0,d.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:A.form.user.name,"onUpdate:modelValue":a[4]||(a[4]=e=>A.form.user.name=e)},null,8,["class","modelValue"]),(0,o.Wm)(Pe,{name:"姓名",class:"invalid-feedback"})]),(0,o._)("div",ie,[re,(0,o.Wm)(qe,{id:"phone",name:"電話",type:"tel",class:(0,d.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:O.isPhone,maxlength:"10",modelValue:A.form.user.tel,"onUpdate:modelValue":a[5]||(a[5]=e=>A.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,o.Wm)(Pe,{name:"電話",class:"invalid-feedback"})]),(0,o._)("div",ue,[he,(0,o._)("div",pe,[(0,o._)("div",ge,[(0,o.Wm)(qe,{id:"city",name:"縣市",rules:"required",as:"select",class:(0,d.C_)(["form-select",{"is-invalid":e["縣市"]}]),modelValue:A.city,"onUpdate:modelValue":a[6]||(a[6]=e=>A.city=e)},{default:(0,o.w5)((()=>[_e,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(A.postal,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,fe)))),128))])),_:2},1032,["class","modelValue"]),(0,o.Wm)(Pe,{name:"縣市",class:"invalid-feedback"})]),(0,o._)("div",ve,[(0,o.Wm)(qe,{id:"area",name:"鄉鎮市區",rules:"required",as:"select",class:(0,d.C_)(["form-select",{"is-invalid":e["鄉鎮市區"]}]),modelValue:A.area,"onUpdate:modelValue":a[7]||(a[7]=e=>A.area=e)},{default:(0,o.w5)((()=>[be,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(A.areaArr,(e=>((0,o.wg)(),(0,o.iD)("option",{value:e.code+" "+e.name,key:e.name},(0,d.zw)(e.name),9,ye)))),128))])),_:2},1032,["class","modelValue"]),(0,o.Wm)(Pe,{name:"區域",class:"invalid-feedback"})])]),(0,o.Wm)(qe,{id:"address",name:"地址",type:"text",class:(0,d.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:A.addressText,"onUpdate:modelValue":a[8]||(a[8]=e=>A.addressText=e)},null,8,["class","modelValue"]),(0,o.Wm)(Pe,{name:"地址",class:"invalid-feedback"})]),(0,o._)("div",we,[xe,(0,o.Wm)(qe,{class:(0,d.C_)(["form-select",{"is-invalid":e["付款方式"]}]),id:"payment",name:"付款方式",rules:"required",as:"select",modelValue:A.form.user.payment,"onUpdate:modelValue":a[9]||(a[9]=e=>A.form.user.payment=e)},{default:(0,o.w5)((()=>[Ce,ke,$e,Ae,Le])),_:2},1032,["class","modelValue"]),(0,o.Wm)(Pe,{name:"付款方式",class:"invalid-feedback"})]),(0,o._)("div",Ve,[De,(0,o.wy)((0,o._)("textarea",{name:"",id:"message",cols:"30",rows:"10",class:"form-control","onUpdate:modelValue":a[10]||(a[10]=e=>A.form.message=e)},null,512),[[c.nr,A.form.message]])]),(0,o._)("div",Te,[(0,o._)("button",{class:"btn btn-danger",type:"submit",style:{"border-radius":"5px"},disabled:0===A.carts.length}," 送出訂單 ",8,Fe)])])),_:1},8,["onSubmit"])])])]))]),(0,o._)("div",Se,[(0,o._)("div",Ue,[(0,o._)("div",Me,[We,(0,o._)("div",ze,[(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:a[11]||(a[11]=e=>A.toPage="")}," 取消 "),(0,o._)("button",{type:"button",class:"btn",onClick:a[12]||(a[12]=e=>O.confirmLeaveFn())}," 確定 ")])])])],512)],64)}n(3863);var qe=JSON.parse('[{"name":"臺北市","children":[{"name":"中正區","code":"100"},{"name":"大同區","code":"103"},{"name":"中山區","code":"104"},{"name":"松山區","code":"105"},{"name":"大安區","code":"106"},{"name":"萬華區","code":"108"},{"name":"信義區","code":"110"},{"name":"士林區","code":"111"},{"name":"北投區","code":"112"},{"name":"內湖區","code":"114"},{"name":"南港區","code":"115"},{"name":"文山區","code":"116"}]},{"name":"新北市","children":[{"name":"萬里區","code":"207"},{"name":"金山區","code":"208"},{"name":"板橋區","code":"220"},{"name":"汐止區","code":"221"},{"name":"深坑區","code":"222"},{"name":"石碇區","code":"223"},{"name":"瑞芳區","code":"224"},{"name":"平溪區","code":"226"},{"name":"雙溪區","code":"227"},{"name":"貢寮區","code":"228"},{"name":"新店區","code":"231"},{"name":"坪林區","code":"232"},{"name":"烏來區","code":"233"},{"name":"永和區","code":"234"},{"name":"中和區","code":"235"},{"name":"土城區","code":"236"},{"name":"三峽區","code":"237"},{"name":"樹林區","code":"238"},{"name":"鶯歌區","code":"239"},{"name":"三重區","code":"241"},{"name":"新莊區","code":"242"},{"name":"泰山區","code":"243"},{"name":"林口區","code":"244"},{"name":"蘆洲區","code":"247"},{"name":"五股區","code":"248"},{"name":"八里區","code":"249"},{"name":"淡水區","code":"251"},{"name":"三芝區","code":"252"},{"name":"石門區","code":"253"}]},{"name":"基隆市","children":[{"name":"仁愛區","code":"200"},{"name":"信義區","code":"201"},{"name":"中正區","code":"202"},{"name":"中山區","code":"203"},{"name":"安樂區","code":"204"},{"name":"暖暖區","code":"205"},{"name":"七堵區","code":"206"}]},{"name":"宜蘭縣","children":[{"name":"宜蘭市","code":"260"},{"name":"頭城鎮","code":"261"},{"name":"礁溪鄉","code":"262"},{"name":"壯圍鄉","code":"263"},{"name":"員山鄉","code":"264"},{"name":"羅東鎮","code":"265"},{"name":"三星鄉","code":"266"},{"name":"大同鄉","code":"267"},{"name":"五結鄉","code":"268"},{"name":"冬山鄉","code":"269"},{"name":"蘇澳鎮","code":"270"},{"name":"南澳鄉","code":"272"}]},{"name":"桃園市","children":[{"name":"中壢區","code":"320"},{"name":"平鎮區","code":"324"},{"name":"龍潭區","code":"325"},{"name":"楊梅區","code":"326"},{"name":"新屋區","code":"327"},{"name":"觀音區","code":"328"},{"name":"桃園區","code":"330"},{"name":"龜山區","code":"333"},{"name":"八德區","code":"334"},{"name":"大溪區","code":"335"},{"name":"復興區","code":"336"},{"name":"大園區","code":"337"},{"name":"蘆竹區","code":"338"}]},{"name":"新竹市","children":[{"name":"北區","code":"300"},{"name":"東區","code":"300"},{"name":"香山區","code":"300"}]},{"name":"新竹縣","children":[{"name":"竹北市","code":"302"},{"name":"湖口鄉","code":"303"},{"name":"新豐鄉","code":"304"},{"name":"新埔鎮","code":"305"},{"name":"關西鎮","code":"306"},{"name":"芎林鄉","code":"307"},{"name":"寶山鄉","code":"308"},{"name":"竹東鎮","code":"310"},{"name":"五峰鄉","code":"311"},{"name":"橫山鄉","code":"312"},{"name":"尖石鄉","code":"313"},{"name":"北埔鄉","code":"314"},{"name":"峨眉鄉","code":"315"}]},{"name":"苗栗縣","children":[{"name":"竹南鎮","code":"350"},{"name":"頭份市","code":"351"},{"name":"三灣鄉","code":"352"},{"name":"南庄鄉","code":"353"},{"name":"獅潭鄉","code":"354"},{"name":"後龍鎮","code":"356"},{"name":"通霄鎮","code":"357"},{"name":"苑裡鎮","code":"358"},{"name":"苗栗市","code":"360"},{"name":"造橋鄉","code":"361"},{"name":"頭屋鄉","code":"362"},{"name":"公館鄉","code":"363"},{"name":"大湖鄉","code":"364"},{"name":"泰安鄉","code":"365"},{"name":"銅鑼鄉","code":"366"},{"name":"三義鄉","code":"367"},{"name":"西湖鄉","code":"368"},{"name":"卓蘭鎮","code":"369"}]},{"name":"臺中市","children":[{"name":"中區","code":"400"},{"name":"東區","code":"401"},{"name":"南區","code":"402"},{"name":"西區","code":"403"},{"name":"北區","code":"404"},{"name":"北屯區","code":"406"},{"name":"西屯區","code":"407"},{"name":"南屯區","code":"408"},{"name":"太平區","code":"411"},{"name":"大里區","code":"412"},{"name":"霧峰區","code":"413"},{"name":"烏日區","code":"414"},{"name":"豐原區","code":"420"},{"name":"后里區","code":"421"},{"name":"石岡區","code":"422"},{"name":"東勢區","code":"423"},{"name":"和平區","code":"424"},{"name":"新社區","code":"426"},{"name":"潭子區","code":"427"},{"name":"大雅區","code":"428"},{"name":"神岡區","code":"429"},{"name":"大肚區","code":"432"},{"name":"沙鹿區","code":"433"},{"name":"龍井區","code":"434"},{"name":"梧棲區","code":"435"},{"name":"清水區","code":"436"},{"name":"大甲區","code":"437"},{"name":"外埔區","code":"438"},{"name":"大安區","code":"439"}]},{"name":"彰化縣","children":[{"name":"彰化市","code":"500"},{"name":"芬園鄉","code":"502"},{"name":"花壇鄉","code":"503"},{"name":"秀水鄉","code":"504"},{"name":"鹿港鎮","code":"505"},{"name":"福興鄉","code":"506"},{"name":"線西鄉","code":"507"},{"name":"和美鎮","code":"508"},{"name":"伸港鄉","code":"509"},{"name":"員林市","code":"510"},{"name":"社頭鄉","code":"511"},{"name":"永靖鄉","code":"512"},{"name":"埔心鄉","code":"513"},{"name":"溪湖鎮","code":"514"},{"name":"大村鄉","code":"515"},{"name":"埔鹽鄉","code":"516"},{"name":"田中鎮","code":"520"},{"name":"北斗鎮","code":"521"},{"name":"田尾鄉","code":"522"},{"name":"埤頭鄉","code":"523"},{"name":"溪州鄉","code":"524"},{"name":"竹塘鄉","code":"525"},{"name":"二林鎮","code":"526"},{"name":"大城鄉","code":"527"},{"name":"芳苑鄉","code":"528"},{"name":"二水鄉","code":"530"}]},{"name":"南投縣","children":[{"name":"南投市","code":"540"},{"name":"中寮鄉","code":"541"},{"name":"草屯鎮","code":"542"},{"name":"國姓鄉","code":"544"},{"name":"埔里鎮","code":"545"},{"name":"仁愛鄉","code":"546"},{"name":"名間鄉","code":"551"},{"name":"集集鎮","code":"552"},{"name":"水里鄉","code":"553"},{"name":"魚池鄉","code":"555"},{"name":"信義鄉","code":"556"},{"name":"竹山鎮","code":"557"},{"name":"鹿谷鄉","code":"558"}]},{"name":"嘉義市","children":[{"name":"東區","code":"600"},{"name":"西區","code":"600"}]},{"name":"嘉義縣","children":[{"name":"番路鄉","code":"602"},{"name":"梅山鄉","code":"603"},{"name":"竹崎鄉","code":"604"},{"name":"阿里山鄉","code":"605"},{"name":"中埔鄉","code":"606"},{"name":"大埔鄉","code":"607"},{"name":"水上鄉","code":"608"},{"name":"鹿草鄉","code":"611"},{"name":"太保市","code":"612"},{"name":"朴子市","code":"613"},{"name":"東石鄉","code":"614"},{"name":"六腳鄉","code":"615"},{"name":"新港鄉","code":"616"},{"name":"民雄鄉","code":"621"},{"name":"大林鎮","code":"622"},{"name":"溪口鄉","code":"623"},{"name":"義竹鄉","code":"624"},{"name":"布袋鎮","code":"625"}]},{"name":"雲林縣","children":[{"name":"斗南鎮","code":"630"},{"name":"大埤鄉","code":"631"},{"name":"虎尾鎮","code":"632"},{"name":"土庫鎮","code":"633"},{"name":"褒忠鄉","code":"634"},{"name":"東勢鄉","code":"635"},{"name":"臺西鄉","code":"636"},{"name":"崙背鄉","code":"637"},{"name":"麥寮鄉","code":"638"},{"name":"斗六市","code":"640"},{"name":"林內鄉","code":"643"},{"name":"古坑鄉","code":"646"},{"name":"莿桐鄉","code":"647"},{"name":"西螺鎮","code":"648"},{"name":"二崙鄉","code":"649"},{"name":"北港鎮","code":"651"},{"name":"水林鄉","code":"652"},{"name":"口湖鄉","code":"653"},{"name":"四湖鄉","code":"654"},{"name":"元長鄉","code":"655"}]},{"name":"臺南市","children":[{"name":"中西區","code":"700"},{"name":"東區","code":"701"},{"name":"南區","code":"702"},{"name":"北區","code":"704"},{"name":"安平區","code":"708"},{"name":"安南區","code":"709"},{"name":"永康區","code":"710"},{"name":"歸仁區","code":"711"},{"name":"新化區","code":"712"},{"name":"左鎮區","code":"713"},{"name":"玉井區","code":"714"},{"name":"楠西區","code":"715"},{"name":"南化區","code":"716"},{"name":"仁德區","code":"717"},{"name":"關廟區","code":"718"},{"name":"龍崎區","code":"719"},{"name":"官田區","code":"720"},{"name":"麻豆區","code":"721"},{"name":"佳里區","code":"722"},{"name":"西港區","code":"723"},{"name":"七股區","code":"724"},{"name":"將軍區","code":"725"},{"name":"學甲區","code":"726"},{"name":"北門區","code":"727"},{"name":"新營區","code":"730"},{"name":"後壁區","code":"731"},{"name":"白河區","code":"732"},{"name":"東山區","code":"733"},{"name":"六甲區","code":"734"},{"name":"下營區","code":"735"},{"name":"柳營區","code":"736"},{"name":"鹽水區","code":"737"},{"name":"善化區","code":"741"},{"name":"大內區","code":"742"},{"name":"山上區","code":"743"},{"name":"新市區","code":"744"},{"name":"安定區","code":"745"}]},{"name":"高雄市","children":[{"name":"新興區","code":"800"},{"name":"前金區","code":"801"},{"name":"苓雅區","code":"802"},{"name":"鹽埕區","code":"803"},{"name":"鼓山區","code":"804"},{"name":"旗津區","code":"805"},{"name":"前鎮區","code":"806"},{"name":"三民區","code":"807"},{"name":"楠梓區","code":"811"},{"name":"小港區","code":"812"},{"name":"左營區","code":"813"},{"name":"仁武區","code":"814"},{"name":"大社區","code":"815"},{"name":"岡山區","code":"820"},{"name":"路竹區","code":"821"},{"name":"阿蓮區","code":"822"},{"name":"田寮區","code":"823"},{"name":"燕巢區","code":"824"},{"name":"橋頭區","code":"825"},{"name":"梓官區","code":"826"},{"name":"彌陀區","code":"827"},{"name":"永安區","code":"828"},{"name":"湖內區","code":"829"},{"name":"鳳山區","code":"830"},{"name":"大寮區","code":"831"},{"name":"林園區","code":"832"},{"name":"鳥松區","code":"833"},{"name":"大樹區","code":"840"},{"name":"旗山區","code":"842"},{"name":"美濃區","code":"843"},{"name":"六龜區","code":"844"},{"name":"內門區","code":"845"},{"name":"杉林區","code":"846"},{"name":"甲仙區","code":"847"},{"name":"桃源區","code":"848"},{"name":"那瑪夏區","code":"849"},{"name":"茂林區","code":"851"},{"name":"茄萣區","code":"852"}]},{"name":"澎湖縣","children":[{"name":"馬公市","code":"880"},{"name":"西嶼鄉","code":"881"},{"name":"望安鄉","code":"882"},{"name":"七美鄉","code":"883"},{"name":"白沙鄉","code":"884"},{"name":"湖西鄉","code":"885"}]},{"name":"屏東縣","children":[{"name":"屏東市","code":"900"},{"name":"三地門鄉","code":"901"},{"name":"霧臺鄉","code":"902"},{"name":"瑪家鄉","code":"903"},{"name":"九如鄉","code":"904"},{"name":"里港鄉","code":"905"},{"name":"高樹鄉","code":"906"},{"name":"鹽埔鄉","code":"907"},{"name":"長治鄉","code":"908"},{"name":"麟洛鄉","code":"909"},{"name":"竹田鄉","code":"911"},{"name":"內埔鄉","code":"912"},{"name":"萬丹鄉","code":"913"},{"name":"潮州鎮","code":"920"},{"name":"泰武鄉","code":"921"},{"name":"來義鄉","code":"922"},{"name":"萬巒鄉","code":"923"},{"name":"崁頂鄉","code":"924"},{"name":"新埤鄉","code":"925"},{"name":"南州鄉","code":"926"},{"name":"林邊鄉","code":"927"},{"name":"東港鎮","code":"928"},{"name":"琉球鄉","code":"929"},{"name":"佳冬鄉","code":"931"},{"name":"新園鄉","code":"932"},{"name":"枋寮鄉","code":"940"},{"name":"枋山鄉","code":"941"},{"name":"春日鄉","code":"942"},{"name":"獅子鄉","code":"943"},{"name":"車城鄉","code":"944"},{"name":"牡丹鄉","code":"945"},{"name":"恆春鎮","code":"946"},{"name":"滿州鄉","code":"947"}]},{"name":"臺東縣","children":[{"name":"臺東市","code":"950"},{"name":"綠島鄉","code":"951"},{"name":"蘭嶼鄉","code":"952"},{"name":"延平鄉","code":"953"},{"name":"卑南鄉","code":"954"},{"name":"鹿野鄉","code":"955"},{"name":"關山鎮","code":"956"},{"name":"海端鄉","code":"957"},{"name":"池上鄉","code":"958"},{"name":"東河鄉","code":"959"},{"name":"成功鎮","code":"961"},{"name":"長濱鄉","code":"962"},{"name":"太麻里鄉","code":"963"},{"name":"金峰鄉","code":"964"},{"name":"大武鄉","code":"965"},{"name":"達仁鄉","code":"966"}]},{"name":"花蓮縣","children":[{"name":"花蓮市","code":"970"},{"name":"新城鄉","code":"971"},{"name":"秀林鄉","code":"972"},{"name":"吉安鄉","code":"973"},{"name":"壽豐鄉","code":"974"},{"name":"鳳林鎮","code":"975"},{"name":"光復鄉","code":"976"},{"name":"豐濱鄉","code":"977"},{"name":"瑞穗鄉","code":"978"},{"name":"萬榮鄉","code":"979"},{"name":"玉里鎮","code":"981"},{"name":"卓溪鄉","code":"982"},{"name":"富里鄉","code":"983"}]},{"name":"金門縣","children":[{"name":"金沙鎮","code":"890"},{"name":"金湖鎮","code":"891"},{"name":"金寧鄉","code":"892"},{"name":"金城鎮","code":"893"},{"name":"烈嶼鄉","code":"894"},{"name":"烏坵鄉","code":"896"}]},{"name":"連江縣","children":[{"name":"南竿鄉","code":"209"},{"name":"北竿鄉","code":"210"},{"name":"莒光鄉","code":"211"},{"name":"東引鄉","code":"212"}]}]'),Pe=n(1339),je={data(){return{postal:qe,isLoading:!1,modal:{},carts:[],delivery:{credit_card:60,atm:60,mart:75,home_delivery:100},shippingFee:0,form:{user:{name:"",tel:"",email:"",address:"",payment:"",deliveryFee:0},message:""},city:null,areaArr:[],area:"",addressText:"",coupon_code:"",isCoupon:!1,couponSuccess:!0,couponErrorMeg:"",toPage:"",confirmLeave:!1}},emits:["temp-selection"],props:["filtered-list","tag-lists"],mixins:[Pe.Z],watch:{city(){const e=this.postal.find((e=>e.name===this.city));this.areaArr=e?e.children:[],this.area=""},address(e){this.form.user.address=e},"form.user.payment"(){this.shippingFee=this.delivery[this.form.user.payment],this.form.user.deliveryFee=this.shippingFee}},computed:{address(){return`${this.area.split(" ")[0]} ${this.city} ${this.area.split(" ")[1]} ${this.addressText}`},totalAmount(){let e=0,a=0,n=0;if(this.carts)return this.carts.forEach((n=>{e+=n.total,a+=n.final_total})),n=e-a,{total:e,finalTotal:Math.round(a),discount:Math.round(n)};this.getCarts()}},methods:{getCarts(){const e="https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart";this.$http.get(e).then((e=>{this.carts=e.data.data.carts,console.log("cart",this.carts),this.carts[0].hasOwnProperty("coupon")&&(this.isCoupon=!0)}))},deleteCart(e){const a=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart/${e}`;this.$http.delete(a).then((e=>{console.log(e),this.getCarts()}))},createOrder(){console.log(this.form);const e="https://vue3-course-api.hexschool.io/api/wakuwaku-api/order";this.$http.post(e,{data:this.form}).then((e=>{this.$emitter.emit("cartsUpdate",{}),e.data.success?(this.confirmLeave=!0,this.$router.push(`/checkout/${e.data.orderId}`)):(this.confirmLeave=!1,console.log("error 發送失敗"))}))},isPhone(e){if(!e)return"電話 為必填";const a=/^(09)[0-9]{8}$/;return!!a.test(e)||"填入正確的電話格式"},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/wakuwaku-api/coupon",a={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:a}).then((e=>{e.data.success?(this.isCoupon=!0,this.couponSuccess=!0,this.errorMessage=e.data.message,this.getCarts()):(this.couponSuccess=!1,this.errorMessage=e.data.message),this.isLoading=!1}))},confirmLeaveFn(){this.confirmLeave=!0,this.hideModal(),this.$router.push(this.toPage)}},created(){this.getCarts()},beforeRouteLeave(e,a,n){this.toPage=e.fullPath,"Order"!==e.name&&0!==this.carts.length&&!1===this.confirmLeave?this.showModal():n()}},Oe=n(3744);const Ie=(0,Oe.Z)(je,[["render",Ee],["__scopeId","data-v-2ccc6ac0"]]);var Ne=Ie}}]);
//# sourceMappingURL=709.0296d2bf.js.map