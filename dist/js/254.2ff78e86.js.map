{"version":3,"file":"js/254.2ff78e86.js","mappings":"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","sources":["webpack://wakuwaku/./src/views/backstage/ArticleList.vue","webpack://wakuwaku/./src/components/ArticleModal.vue","webpack://wakuwaku/./src/components/ArticleModal.vue?63dd","webpack://wakuwaku/./src/views/backstage/ArticleList.vue?24a1"],"sourcesContent":["<!-- eslint-disable vuejs-accessibility/label-has-for -->\n<template>\n  <div class=\"mx-3\">\n    <!-- <Loading :active=\"isLoading\"></Loading> -->\n    <div class=\"text-end\">\n      <button\n        class=\"btn btn-primary col-1 me-5\"\n        @click=\"openArticleModal(true)\"\n      >\n        <i class=\"fa-solid fa-plus\"></i> 新增文章\n      </button>\n    </div>\n    <table class=\"table mt-4\">\n      <thead>\n        <tr>\n          <th style=\"width: 300px\">封面圖片</th>\n          <th>文章種類</th>\n          <th>名稱</th>\n          <th>作者</th>\n          <th>ID</th>\n          <th>是否公開</th>\n          <th>編輯</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in articles\" :key=\"item.id\">\n          <td>\n            <img\n              v-if=\"item.coverImg\"\n              style=\"max-height: 100px\"\n              :src=\"item.coverImg\"\n              alt=\"\"\n            />\n            <img\n              v-else\n              style=\"max-height: 100px\"\n              src=\"@/assets/img/Nopicsign.png\"\n              alt=\"\"\n            />\n          </td>\n          <td class=\"fw-bold fs-5\">\n            <span class=\"text-primary\" v-if=\"item.article_type === 'event'\"\n              >活動</span\n            >\n            <span style=\"color: #18b16a\" v-if=\"item.article_type === 'guide'\"\n              >導購</span\n            >\n          </td>\n          <td>{{ item.title }}</td>\n          <td>{{ item.author }}</td>\n          <td>{{ item.id }}</td>\n          <td>\n            <span class=\"text-success fw-bolder\" v-if=\"item.isPublic === true\"\n              >公開</span\n            >\n            <span class=\"text-muted fw-bolder\" v-else>未公開</span>\n          </td>\n          <td>\n            <div class=\"btn-group\">\n              <button\n                class=\"btn btn-outline-primary btn-sm\"\n                @click=\"openArticleModal(false, item.id)\"\n              >\n                編輯\n              </button>\n              <button\n                class=\"btn btn-outline-danger btn-sm\"\n                @click=\"openDelModal(item)\"\n              >\n                刪除\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <ArticleModal\n    ref=\"articleModal\"\n    :is_new=\"isNew\"\n    :article=\"tempArticle\"\n    @update_article=\"updateArticle\"\n  ></ArticleModal>\n  <DelModal\n    ref=\"delModal\"\n    :item-title=\"tempArticle.title\"\n    :item-id=\"tempArticle.id\"\n    @delete-item=\"deleteArticle\"\n  ></DelModal>\n</template>\n<script>\nimport ArticleModal from '@/components/ArticleModal.vue';\nimport DelModal from '@/components/DelModal.vue';\n\nexport default {\n  data() {\n    return {\n      articles: [],\n      pageInfo: {},\n      tempArticle: {\n        title: 'No anything',\n        id: 'No anything',\n      },\n      isNew: false,\n      isLoading: false,\n    };\n  },\n  components: { ArticleModal, DelModal },\n  inject: ['emitter'],\n  methods: {\n    getArticles(page = 1) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/articles?page=${page}`;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          this.articles = res.data.articles;\n          const { pagination } = res.data;\n          this.pageInfo = {\n            pageTotal: pagination.total_pages,\n            currentPage: pagination.current_page,\n            hasPrev: pagination.has_pre,\n            hasNext: pagination.has_next,\n          };\n        }\n      });\n    },\n    openArticleModal(isNew, id) {\n      const articleComponent = this.$refs.articleModal;\n      if (isNew) {\n        this.isNew = isNew;\n        this.tempArticle = {\n          article_type: 'event',\n          isPublic: false,\n          content: '<p>請輸入文章內容</p>',\n        };\n        articleComponent.showModal();\n      } else {\n        this.isNew = isNew;\n        const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/article/${id}`;\n        this.$http.get(url).then((res) => {\n          if (res.data.success) {\n            const resArticle = res.data.article;\n            this.tempArticle = { ...resArticle };\n            articleComponent.showModal();\n          }\n        });\n      }\n    },\n    // 更新文章\n    updateArticle(item) {\n      this.tempArticle = item;\n      // 新增\n      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/article`;\n      let httpMethod = 'post';\n      // 編輯\n      if (!this.isNew) {\n        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/article/${item.id}`;\n        httpMethod = 'put';\n      }\n      const articleComponent = this.$refs.articleModal;\n      this.$http[httpMethod](api, { data: this.tempArticle }).then((res) => {\n        articleComponent.hideModal();\n        this.getArticles();\n        this.$httpMessageState(res, '更新文章');\n      });\n    },\n    // 刪除\n    openDelModal(item) {\n      this.tempArticle = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    // 刪除\n    deleteArticle(id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/article/${id}`;\n      const delComponent = this.$refs.delModal;\n      this.isLoading = true;\n      this.$http.delete(api).then((res) => {\n        this.isLoading = false;\n        delComponent.hideModal();\n        this.getArticles();\n        this.$httpMessageState(res, '刪除文章');\n      });\n    },\n  },\n  created() {\n    this.getArticles();\n  },\n};\n</script>\n","<template>\n  <!-- Modal -->\n  <div\n    class=\"modal fade\"\n    id=\"articleModal\"\n    data-bs-backdrop=\"static\"\n    data-bs-focus=\"false\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-labelledby=\"articleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl modal-dialog-scrollable\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" id=\"articleModalLabel\">編輯文章</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <!-- 左側 -->\n            <div class=\"col-md-3 col-12\">\n              <div class=\"mb-1\">\n                <p class=\"mb-1 p-0\">文章種類</p>\n                <div class=\"d-flex justify-content-around\">\n                  <div class=\"form-check\">\n                    <input\n                      type=\"radio\"\n                      class=\"form-check-input\"\n                      id=\"article_type_1\"\n                      name=\"article_type\"\n                      value=\"event\"\n                      v-model=\"tempArticle.article_type\"\n                    />\n                    <label for=\"article_type_1\" class=\"form-check-label\"\n                      >活動 Event</label\n                    >\n                  </div>\n                  <div class=\"form-check\">\n                    <input\n                      type=\"radio\"\n                      class=\"form-check-input\"\n                      id=\"article_type_2\"\n                      name=\"article_type\"\n                      value=\"guide\"\n                      v-model=\"tempArticle.article_type\"\n                    />\n                    <label for=\"article_type_2\" class=\"form-check-label\"\n                      >導購 Guide</label\n                    >\n                  </div>\n                </div>\n              </div>\n              <div class=\"mb-1\" v-if=\"tempArticle.article_type !== 'event'\">\n                <label for=\"campaign_url\" class=\"form-label w-100\"\n                  >導購網址\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"campaign_url\"\n                    placeholder=\"請輸入導購Url\"\n                    v-model=\"tempArticle.campaignUrl\"\n                    :disabled=\"tempArticle.article_type === 'event'\"\n                /></label>\n              </div>\n              <div class=\"mb-1\">\n                <label for=\"title\" class=\"form-label w-100\"\n                  >名稱\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"title\"\n                    placeholder=\"請輸入文章名稱\"\n                    v-model=\"tempArticle.title\"\n                /></label>\n              </div>\n              <div class=\"mb-1\">\n                <label for=\"author\" class=\"form-label w-100\"\n                  >作者\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"author\"\n                    placeholder=\"請輸入作者\"\n                    v-model=\"tempArticle.author\"\n                /></label>\n              </div>\n              <div class=\"mb-1\">\n                <label for=\"cover_img\" class=\"form-label w-100\"\n                  >封面圖片 (1300x400)\n                  <div class=\"input-group\">\n                    <input\n                      type=\"url\"\n                      class=\"form-control\"\n                      id=\"cover_img\"\n                      placeholder=\"圖片網址\"\n                      v-model=\"tempArticle.coverImg\"\n                    />\n                    <!-- eslint-disable-next-line vuejs-accessibility/form-control-has-label -->\n                    <input\n                      type=\"file\"\n                      id=\"coverImgFile\"\n                      ref=\"coverImgFile\"\n                      style=\"display: none\"\n                      @change=\"uploadImg()\"\n                    />\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-secondary\"\n                      @click=\"this.$refs.coverImgFile.click()\"\n                    >\n                      <i class=\"bi bi-file-earmark-arrow-up\"></i>\n                    </button></div\n                ></label>\n              </div>\n              <div class=\"form-check ms-1 fs-5 fw-bold\">\n                <label class=\"form-check-label\" for=\"is_public\"\n                  ><input\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    id=\"is_public\"\n                    v-model=\"tempArticle.isPublic\"\n                  />\n                  是否公開\n                </label>\n              </div>\n            </div>\n\n            <!-- 右側 -->\n            <div class=\"col-md-9 col-12\">\n              <div class=\"d-flex justify-content-center\">\n                <img\n                  :src=\"tempArticle.coverImg\"\n                  alt=\"請上傳圖片\"\n                  class=\"img-fluid\"\n                />\n              </div>\n            </div>\n          </div>\n          <hr />\n          <!-- 下方內容 -->\n          <div class=\"col-md-12 mt-2\">\n            <p>文章內容 (導購不會顯示)</p>\n            <documentEditor\n              @editor-content=\"editorContent\"\n              :content=\"tempArticle.content\"\n            ></documentEditor>\n            <p>預覽文章內容</p>\n            <p>{{ tempArticle.content }}</p>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            data-bs-dismiss=\"modal\"\n          >\n            Close\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"emitArticle\">\n            更新文章\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport modalMixin from '@/mixins/modalMixin';\nimport documentEditor from '@/components/CkEditorComponent.vue';\n\nexport default {\n  name: 'articleModal',\n  mixins: [modalMixin],\n  props: {\n    is_new: Boolean,\n    article: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  emits: ['update_article'],\n  data() {\n    return {\n      modal: {},\n      tempArticle: {\n        article_type: 'event',\n        title: '',\n        create_at: 0,\n        author: '',\n        isPublic: false,\n        content: '',\n        coverImg: '',\n        campaignUrl: '',\n      },\n    };\n  },\n\n  components: { documentEditor },\n  watch: {\n    article() {\n      this.tempArticle = this.article;\n    },\n    'tempArticle.article_type'() {\n      if (this.tempArticle.article_type === 'event') {\n        this.tempArticle.campaignUrl = '';\n      }\n    },\n  },\n\n  methods: {\n    // 送出文章\n    emitArticle() {\n      if (this.is_new === true) {\n        this.tempArticle.create_at = Math.floor(new Date().getTime() / 1000);\n      }\n      this.$emit('update_article', this.tempArticle);\n      this.tempArticle = {\n        article_type: '',\n        title: '',\n        create_at: 0,\n        author: '',\n        isPublic: false,\n        content: '',\n        coverImg: '',\n        campaignUrl: '',\n      };\n      this.due_date = '';\n    },\n    uploadImg() {\n      const uploadedFile = this.$refs.coverImgFile.files[0];\n      const formData = new FormData();\n      formData.append('file-to-upload', uploadedFile);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n      this.$http.post(url, formData).then((res) => {\n        if (res.data.success) {\n          this.tempArticle.coverImg = res.data.imageUrl;\n        }\n      });\n    },\n    //  編輯器emit出的內容\n    editorContent(content) {\n      this.tempArticle.content = content;\n    },\n  },\n};\n</script>\n\n});\n","import { render } from \"./ArticleModal.vue?vue&type=template&id=f02a2370\"\nimport script from \"./ArticleModal.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Users\\\\Yoruru\\\\Desktop\\\\Coding\\\\VueFinalHomework\\\\wakuwaku\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ArticleList.vue?vue&type=template&id=f5625ab8\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=js\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Users\\\\Yoruru\\\\Desktop\\\\Coding\\\\VueFinalHomework\\\\wakuwaku\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_3","style","src","_imports_0","alt","_hoisted_1","_hoisted_2","onClick","$options","_hoisted_6","_hoisted_7","_createElementBlock","_Fragment","$data","item","key","id","coverImg","_hoisted_9","_hoisted_10","article_type","_hoisted_11","_hoisted_12","title","author","isPublic","_hoisted_13","_hoisted_14","_hoisted_15","_createVNode","_component_ArticleModal","ref","is_new","article","onUpdate_article","_component_DelModal","onDeleteItem","tabindex","role","type","for","_hoisted_29","_hoisted_4","_hoisted_5","_hoisted_8","name","value","_hoisted_16","placeholder","campaignUrl","disabled","_hoisted_19","_hoisted_20","_hoisted_22","_hoisted_23","_hoisted_25","_hoisted_26","_hoisted_28","onChange","$refs","coverImgFile","click","_hoisted_31","_hoisted_32","_hoisted_34","_hoisted_35","_hoisted_37","_hoisted_38","_hoisted_39","_component_documentEditor","onEditorContent","content","_hoisted_40","_hoisted_41","_hoisted_42","mixins","modalMixin","props","Boolean","Object","default","emits","data","modal","tempArticle","create_at","components","documentEditor","watch","this","methods","emitArticle","Math","floor","Date","getTime","$emit","due_date","uploadImg","uploadedFile","files","formData","FormData","append","url","$http","post","then","res","success","imageUrl","editorContent","__exports__","articles","pageInfo","isNew","isLoading","ArticleModal","DelModal","inject","getArticles","page","get","pagination","pageTotal","total_pages","currentPage","current_page","hasPrev","has_pre","hasNext","has_next","openArticleModal","articleComponent","articleModal","showModal","resArticle","updateArticle","api","httpMethod","hideModal","$httpMessageState","openDelModal","delComponent","delModal","deleteArticle","delete","created","render"],"sourceRoot":""}