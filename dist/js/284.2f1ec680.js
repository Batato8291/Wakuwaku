"use strict";(self["webpackChunkwakuwaku"]=self["webpackChunkwakuwaku"]||[]).push([[284],{8357:function(t,s,a){function i(t,s,a,i,l,e){const r={search:"",category:t};!1!==s&&(r.tag=s),!1!==a&&(r.author=a),!1!==i&&(r.publisher=i),!0===l&&(r.isPopular=!0),!0===e&&(r.isOnSale=!0),this.$router.push({path:"/search",query:r})}function l(t){this.favorArr=JSON.parse(localStorage.getItem("favor"))||[];const s=this.favorArr.indexOf(t);if(-1===s){this.favorArr.push(t);const s={data:{success:!0}};this.$httpMessageState(s,"加入收藏")}else{this.favorArr.splice(s,1);const t={data:{success:!1,message:"favor"}};this.$httpMessageState(t,"取消收藏")}localStorage.setItem("favor",JSON.stringify(this.favorArr))}function e(t){const s="https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart";this.status.loadingItem=t;const a={product_id:t,qty:1};this.$http.post(s,{data:a}).then((t=>{this.status.loadingItem="",this.$httpMessageState(t,"加入購物車")}))}a.d(s,{Xq:function(){return e},ZP:function(){return i},ag:function(){return l}})},3284:function(t,s,a){a.r(s),a.d(s,{default:function(){return st}});var i=a(6252),l=a(3577),e=a(9963);const r=t=>((0,i.dD)("data-v-f9a75692"),t=t(),(0,i.Cn)(),t),o={class:"container mt-3"},c={class:"row justify-content-center"},n={class:"col-12"},d=r((()=>(0,i._)("h1",{class:"fw-bold px-2",style:{color:"#ffbf00"}},"收藏商品",-1))),u={class:"lg-list d-lg-none"},h=r((()=>(0,i._)("div",{class:"w-100 lg-list-th"},null,-1))),p={key:0},g=r((()=>(0,i._)("div",{class:"lg-list-item d-flex flex-row p-2 fs-3 fw-bold",style:{color:"gray"}}," 目前沒有收藏的商品... ",-1))),f={class:"d-flex justify-content-center mt-5"},_=(0,i.Uk)(" 前往商店 "),v=r((()=>(0,i._)("i",{class:"bi bi-arrow-bar-right"},null,-1))),w=["src"],b={class:"lg-list-item-info px-2 w-100"},k={class:"px-2"},m={class:"px-2 my-1"},y={class:"text-danger"},x={key:0,class:"text-decoration-line-through text-secondary me-2"},D={class:"lg-list-item-btn"},I=["onClick","disabled"],C=r((()=>(0,i._)("i",{class:"fa-solid fa-cart-arrow-down"},null,-1))),S=[C],$=["onClick"],A=r((()=>(0,i._)("i",{class:"bi bi-x"},null,-1))),O=[A],q={key:0,class:"lg-list-item flex-row d-none d-lg-block",style:{"min-height":"50vh"}},M=r((()=>(0,i._)("div",{class:"w-100",style:{height:"1rem","background-color":"rgb(251 164 59)"}},null,-1))),z=r((()=>(0,i._)("p",{class:"px-2 mt-3 fs-3 fw-bold",style:{color:"gray"}}," 目前沒有收藏的商品... ",-1))),U={class:"d-flex justify-content-center mt-5"},J=(0,i.Uk)(" 前往商店 "),N=r((()=>(0,i._)("i",{class:"bi bi-arrow-bar-right"},null,-1))),P={key:1,class:"table d-none d-lg-table"},W=r((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{class:"col-2"}),(0,i._)("th",{class:"col-5"},"品名"),(0,i._)("th",{class:"col-2"},"價格"),(0,i._)("th",{class:"col-2"},[(0,i._)("div",null,"加入購物車")]),(0,i._)("th",{class:"col-1"},[(0,i._)("div",null,"刪除")])])],-1))),j={class:""},F=["src"],T={class:"text-danger"},E={key:0,class:"text-secondary text-decoration-line-through"},H=["onClick","disabled"],K=r((()=>(0,i._)("i",{class:"fa-solid fa-cart-arrow-down"},null,-1))),X=[K],Y=["onClick"],Z=r((()=>(0,i._)("i",{class:"bi bi-x"},null,-1))),L=[Z],B={key:0,class:"",style:{"min-height":"50vh"}};function G(t,s,a,r,C,A){const K=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",c,[(0,i._)("div",n,[d,(0,i._)("div",u,[h,0===C.products.length?((0,i.wg)(),(0,i.iD)("div",p,[g,(0,i._)("div",f,[(0,i.Wm)(K,{class:"btn text-white fw-semibold shadow-none",to:"/search?search=&category=all",style:{"background-color":"rgb(251 164 59)"}},{default:(0,i.w5)((()=>[_,v])),_:1})])])):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"lg-list-item d-flex flex-row p-2",key:t.id},[(0,i._)("div",null,[(0,i.Wm)(K,{to:"#"},{default:(0,i.w5)((()=>[(0,i._)("img",{class:"product-img",src:t.images[0],alt:"product pic"},null,8,w)])),_:2},1024)]),(0,i._)("div",b,[(0,i._)("div",k,[(0,i.Wm)(K,{class:"fs-5",to:"#"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,l.zw)(t.title),1)])),_:2},1024)]),(0,i._)("div",m,[(0,i._)("div",y,[(0,i.Uk)(" $"+(0,l.zw)(t.price)+" ",1),t.origin_price>t.price?((0,i.wg)(),(0,i.iD)("span",x,"$"+(0,l.zw)(t.origin_price),1)):(0,i.kq)("",!0)])]),(0,i._)("div",D,[(0,i._)("button",{class:"btn cart-btn",onClick:(0,e.iM)((s=>(C.cartIDs.push(t.id),A.addToCart(t.id))),["prevent"]),disabled:-1!==C.cartIDs.indexOf(t.id)},S,8,I),(0,i._)("button",{class:"btn btn-outline-danger",onClick:(0,e.iM)((s=>A.removeFavor(t)),["prevent"])},O,8,$)])])])))),128))]),0===C.products.length?((0,i.wg)(),(0,i.iD)("div",q,[M,z,(0,i._)("div",U,[(0,i.Wm)(K,{class:"btn text-white fw-semibold shadow-none",to:"/search?search=&category=all",style:{"background-color":"rgb(251 164 59)"}},{default:(0,i.w5)((()=>[J,N])),_:1})])])):((0,i.wg)(),(0,i.iD)("table",P,[W,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.products,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,[(0,i._)("div",j,[(0,i._)("img",{class:"product-img",src:t.images[0],alt:""},null,8,F)])]),(0,i._)("td",null,[(0,i._)("p",null,(0,l.zw)(t.title),1)]),(0,i._)("td",null,[(0,i._)("p",T,[(0,i.Uk)(" $"+(0,l.zw)(t.price)+"  ",1),t.origin_price>t.price?((0,i.wg)(),(0,i.iD)("span",E,"$"+(0,l.zw)(t.origin_price),1)):(0,i.kq)("",!0)])]),(0,i._)("td",null,[(0,i._)("div",null,[(0,i._)("button",{class:"btn w-50 cart-btn",onClick:(0,e.iM)((s=>(C.cartIDs.push(t.id),A.addToCart(t.id))),["prevent"]),disabled:-1!==C.cartIDs.indexOf(t.id)},X,8,H)])]),(0,i._)("td",null,[(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-outline-danger",onClick:(0,e.iM)((s=>A.removeFavor(t)),["prevent"])},L,8,Y)])])])))),128)),C.products.length<=2?((0,i.wg)(),(0,i.iD)("div",B)):(0,i.kq)("",!0)])]))])])])}var Q=a(8357),R={data(){return{isLoading:!1,favorArr:JSON.parse(localStorage.getItem("favor"))||[],products:[],cartIDs:[],status:{loadingItem:""}}},computed:{},created(){this.getCartIDs(),this.favorArr.forEach(((t,s)=>{this.getProduct(t,s)}))},methods:{getProduct(t,s){const a=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/product/${t}`;this.$http.get(a).then((t=>{this.products.splice(s,0,t.data.product)}))},getCartIDs(){this.cartIDs=[];const t="https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart";this.$http.get(t).then((t=>{t.data.data.carts.forEach((t=>{this.cartIDs.push(t.product_id)}))}))},removeFavor(t){const s=this.favorArr.indexOf(t.id),a=this.products.indexOf(t);this.favorArr.splice(s,1),this.products.splice(a,1),localStorage.setItem("favor",JSON.stringify(this.favorArr))},addToCart:Q.Xq,pushCart(t){this.cartIDs.push(t)}}},V=a(3744);const tt=(0,V.Z)(R,[["render",G],["__scopeId","data-v-f9a75692"]]);var st=tt}}]);
//# sourceMappingURL=284.2f1ec680.js.map