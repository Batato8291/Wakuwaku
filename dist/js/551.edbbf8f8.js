(self["webpackChunkwakuwaku"]=self["webpackChunkwakuwaku"]||[]).push([[551],{3863:function(t,e,o){
/*!
  * Bootstrap collapse.js v5.2.0-beta1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,s){t.exports=s(o(4072),o(9286),o(8737),o(5695))})(0,(function(t,e,o,s){"use strict";const a=t=>t&&"object"===typeof t&&"default"in t?t:{default:t},l=a(e),i=a(o),r=a(s),n="collapse",c="bs.collapse",d=`.${c}`,u=".data-api",h=`show${d}`,p=`shown${d}`,g=`hide${d}`,f=`hidden${d}`,m=`click${d}${u}`,_="show",w="collapse",y="collapsing",v="collapsed",b=`:scope .${w} .${w}`,k="collapse-horizontal",C="width",S="height",T=".collapse.show, .collapse.collapsing",A='[data-bs-toggle="collapse"]',I={toggle:!0,parent:null},$={toggle:"boolean",parent:"(null|element)"};class D extends r.default{constructor(e,o){super(e,o),this._isTransitioning=!1,this._triggerArray=[];const s=i.default.find(A);for(const a of s){const e=t.getSelectorFromElement(a),o=i.default.find(e).filter((t=>t===this._element));null!==e&&o.length&&this._triggerArray.push(a)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return I}static get DefaultType(){return $}static get NAME(){return n}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(T).filter((t=>t!==this._element)).map((t=>D.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=l.default.trigger(this._element,h);if(e.defaultPrevented)return;for(const l of t)l.hide();const o=this._getDimension();this._element.classList.remove(w),this._element.classList.add(y),this._element.style[o]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(y),this._element.classList.add(w,_),this._element.style[o]="",l.default.trigger(this._element,p)},a=o[0].toUpperCase()+o.slice(1),i=`scroll${a}`;this._queueCallback(s,this._element,!0),this._element.style[o]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const e=l.default.trigger(this._element,g);if(e.defaultPrevented)return;const o=this._getDimension();this._element.style[o]=`${this._element.getBoundingClientRect()[o]}px`,t.reflow(this._element),this._element.classList.add(y),this._element.classList.remove(w,_);for(const a of this._triggerArray){const e=t.getElementFromSelector(a);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([a],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(y),this._element.classList.add(w),l.default.trigger(this._element,f)};this._element.style[o]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(_)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=t.getElement(e.parent),e}_getDimension(){return this._element.classList.contains(k)?C:S}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(A);for(const o of e){const e=t.getElementFromSelector(o);e&&this._addAriaAndCollapsedClass([o],this._isShown(e))}}_getFirstLevelChildren(t){const e=i.default.find(b,this._config.parent);return i.default.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const o of t)o.classList.toggle(v,!e),o.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const o=D.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof o[t])throw new TypeError(`No method named "${t}"`);o[t]()}}))}}return l.default.on(document,m,A,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const o=t.getSelectorFromElement(this),s=i.default.find(o);for(const t of s)D.getOrCreateInstance(t,{toggle:!1}).toggle()})),t.defineJQueryPlugin(D),D}))},8737:function(t,e,o){
/*!
  * Bootstrap selector-engine.js v5.2.0-beta1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(e,s){t.exports=s(o(4072))})(0,(function(t){"use strict";const e={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const o=[];let s=t.parentNode.closest(e);while(s)o.push(s),s=s.parentNode.closest(e);return o},prev(t,e){let o=t.previousElementSibling;while(o){if(o.matches(e))return[o];o=o.previousElementSibling}return[]},next(t,e){let o=t.nextElementSibling;while(o){if(o.matches(e))return[o];o=o.nextElementSibling}return[]},focusableChildren(e){const o=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(o,e).filter((e=>!t.isDisabled(e)&&t.isVisible(e)))}};return e}))},8357:function(t,e,o){"use strict";function s(t,e,o,s,a,l){const i={search:"",category:t};!1!==e&&(i.tag=e),!1!==o&&(i.author=o),!1!==s&&(i.publisher=s),!0===a&&(i.isPopular=!0),!0===l&&(i.isOnSale=!0),this.$router.push({path:"/search",query:i})}function a(t){console.log("add or remove favorites",t),this.favorArr=JSON.parse(localStorage.getItem("favor"))||[];const e=this.favorArr.indexOf(t);-1===e?this.favorArr.push(t):this.favorArr.splice(e,1),localStorage.setItem("favor",JSON.stringify(this.favorArr))}function l(t){console.log("add to cart",t);const e="https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart";this.status.loadingItem=t;const o={product_id:t,qty:1};this.$http.post(e,{data:o}).then((t=>{this.status.loadingItem="",this.$emitter.emit("cartsUpdate",{}),console.log(t)}))}o.d(e,{Xq:function(){return l},ZP:function(){return s},ag:function(){return a}})},7377:function(t,e,o){"use strict";o.d(e,{Z:function(){return P}});var s=o(6252),a=o(3577);const l=t=>((0,s.dD)("data-v-360d27aa"),t=t(),(0,s.Cn)(),t),i={class:"card_container"},r={class:"card_pic",id:"eko"},n={key:0,class:"collect_icon"},c=l((()=>(0,s._)("i",{class:"fa-regular fa-sun"},null,-1))),d=[c],u={key:1,class:"collect_icon"},h=l((()=>(0,s._)("i",{class:"fa-solid fa-sun"},null,-1))),p=[h],g=["src"],f=["title"],m=["title"],_={class:"card_control"},w=["disabled"],y={class:"btn_price"},v={class:"btn_shopping_icon"},b={key:0,class:"spinner-border spinner-border-sm text-light",role:"status",style:{"margin-bottom":"0.2rem"}},k=l((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),C=[k],S={key:1,class:"fa-solid fa-cart-shopping","aria-hidden":"true"},T=l((()=>(0,s._)("span",{class:"btn_add"},"加入購物車",-1)));function A(t,e,o,l,c,h){const k=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",r,[(0,s._)("div",{class:"card_collect",onClick:e[0]||(e[0]=t=>h.addToFavor(o.productInfo.id))},[!1===h.isFavorite?((0,s.wg)(),(0,s.iD)("span",n,d)):((0,s.wg)(),(0,s.iD)("span",u,p))]),(0,s.Wm)(k,{class:"w-100",to:`/product/${o.productInfo.id}`},{default:(0,s.w5)((()=>[(0,s._)("img",{class:"w-100",src:o.productInfo.images[0],alt:"產品圖片"},null,8,g)])),_:1},8,["to"])]),(0,s.Wm)(k,{class:"card_content",to:`/product/${o.productInfo.id}`},{default:(0,s.w5)((()=>[(0,s._)("p",{class:"card_title words-loop",title:o.productInfo.title},(0,a.zw)(o.productInfo.title),9,f),(0,s._)("p",{class:"card_author",title:o.productInfo.author.join("、")},(0,a.zw)(o.productInfo.author.join("、")),9,m)])),_:1},8,["to"]),(0,s._)("div",_,[(0,s._)("button",{class:"card_cartBtn",onClick:e[1]||(e[1]=t=>h.addToCart(o.productInfo.id)),disabled:this.status.loadingItem===o.productInfo.id},[(0,s._)("span",y,"$"+(0,a.zw)(o.productInfo.price),1),(0,s._)("span",v,[this.status.loadingItem===o.productInfo.id?((0,s.wg)(),(0,s.iD)("div",b,C)):((0,s.wg)(),(0,s.iD)("i",S))]),T],8,w)])])}var I=o(8357),$={props:{productInfo:{type:Object,default(){return{}}}},watch:{productInfo:()=>{console.log("change Card")},favorArr(){console.log("favor change")}},computed:{isFavorite(){const t=this.favorArr.indexOf(this.productInfo.id);return-1!==t}},data(){return{favorIndex:"",favorArr:JSON.parse(localStorage.getItem("favor"))||[],changeCard:!1,tempProductInfo:{},status:{loadingItem:""}}},methods:{addToCart:I.Xq,addToFavor:I.ag},mounted(){}},D=o(3744);const N=(0,D.Z)($,[["render",A],["__scopeId","data-v-360d27aa"]]);var P=N},8551:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return he}});var s=o(6252),a=o(9963),l=o(3577);const i=t=>((0,s.dD)("data-v-948d3aa4"),t=t(),(0,s.Cn)(),t),r={class:"container"},n={class:"row"},c={class:"col-12 col-lg-3 category-list pb-3",style:{"background-color":"bisque","min-height":"500px"}},d={class:"list-group list-group-flush mt-3"},u=i((()=>(0,s._)("span",{class:"nav-item-icon"},[(0,s._)("i",{class:"fa-regular fa-face-smile"})],-1))),h=(0,s.Uk)(" 全部商品 "),p=[u,h],g=i((()=>(0,s._)("span",{class:"nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-arrow-trend-up"})],-1))),f=(0,s.Uk)(" 人氣熱門 "),m=[g,f],_=i((()=>(0,s._)("span",{class:"nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-arrows-down-to-line"})],-1))),w=(0,s.Uk)(" 現在特價 "),y=[_,w],v={class:"list-group-item",href:"#comicCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"true"},b=i((()=>(0,s._)("a",null,[(0,s._)("span",{class:"category-icon nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,s.Uk)(" 漫畫分類 ")],-1))),k=i((()=>(0,s._)("i",{class:"fa-solid fa-book"},null,-1))),C=(0,s.Uk)(" 全部漫畫 "),S=i((()=>(0,s._)("i",{class:"fa-solid fa-book"},null,-1))),T=(0,s.Uk)(" 熱門漫畫 "),A=i((()=>(0,s._)("i",{class:"fa-solid fa-book"},null,-1))),I=(0,s.Uk)(" 特價漫畫 "),$=i((()=>(0,s._)("li",null,[(0,s._)("hr")],-1))),D=i((()=>(0,s._)("i",{class:"fa-solid fa-hashtag"},null,-1))),N={class:"list-group-item",href:"#lightNovelCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},P=i((()=>(0,s._)("a",null,[(0,s._)("span",{class:"category-icon nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,s.Uk)(" 輕小說分類 ")],-1))),q=i((()=>(0,s._)("i",{class:"fa-solid fa-book-journal-whills"},null,-1))),Q=(0,s.Uk)(" 全部輕小說 "),x=i((()=>(0,s._)("i",{class:"fa-solid fa-book-journal-whills"},null,-1))),F=(0,s.Uk)(" 熱門輕小說 "),L=i((()=>(0,s._)("i",{class:"fa-solid fa-book-journal-whills"},null,-1))),U=(0,s.Uk)(" 特價輕小說 "),z=i((()=>(0,s._)("li",null,[(0,s._)("hr")],-1))),O=i((()=>(0,s._)("i",{class:"fa-solid fa-hashtag"},null,-1))),B={class:"list-group-item",href:"#novelCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},E=i((()=>(0,s._)("a",null,[(0,s._)("span",{class:"category-icon nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,s.Uk)(" 一般小說分類 ")],-1))),W=i((()=>(0,s._)("i",{class:"fa-solid fa-book-bookmark"},null,-1))),j=(0,s.Uk)(" 全部一般小說 "),M=i((()=>(0,s._)("i",{class:"fa-solid fa-book-bookmark"},null,-1))),H=(0,s.Uk)(" 熱門一般小說 "),Z=i((()=>(0,s._)("i",{class:"fa-solid fa-book-bookmark"},null,-1))),K=(0,s.Uk)(" 特價一般小說 "),Y=i((()=>(0,s._)("li",null,[(0,s._)("hr")],-1))),J=i((()=>(0,s._)("i",{class:"fa-solid fa-hashtag"},null,-1))),R={class:"list-group-item",href:"#nonfictionCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},X=i((()=>(0,s._)("a",null,[(0,s._)("span",{class:"category-icon nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,s.Uk)(" 實用書分類 ")],-1))),V=i((()=>(0,s._)("i",{class:"fa-solid fa-book-atlas"},null,-1))),G=(0,s.Uk)(" 全部實用書 "),tt=i((()=>(0,s._)("i",{class:"fa-solid fa-book-atlas"},null,-1))),et=(0,s.Uk)(" 熱門實用書 "),ot=i((()=>(0,s._)("i",{class:"fa-solid fa-book-atlas"},null,-1))),st=(0,s.Uk)(" 特價實用書 "),at=i((()=>(0,s._)("li",null,[(0,s._)("hr")],-1))),lt=i((()=>(0,s._)("i",{class:"fa-solid fa-hashtag"},null,-1))),it={class:"list-group-item",href:"#authorCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},rt=i((()=>(0,s._)("a",null,[(0,s._)("span",{class:"category-icon nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,s.Uk)(" 依作者 ")],-1))),nt={class:"collapse mt-2 show",id:"authorCollapse"},ct={class:"list-group-item",href:"#publisherCollapse","data-bs-toggle":"collapse",role:"button","aria-expanded":"false"},dt=i((()=>(0,s._)("a",null,[(0,s._)("span",{class:"category-icon nav-item-icon"},[(0,s._)("i",{class:"fa-solid fa-angles-right category-icon"})]),(0,s.Uk)(" 依出版社 ")],-1))),ut={class:"collapse mt-2 show",id:"publisherCollapse"},ht={class:"col-12 col-lg-9 bg-light",style:{"min-height":"500px"}},pt={class:"row pt-2 search-title no-wrap"},gt={class:"fw-bold col-8"},ft={key:0},mt={key:1},_t={key:2},wt={class:"col-4 text-end"},yt={class:"fw-bold me-3"},vt={class:"row display-selection-zone py-2"},bt={class:"col-7 col-md-6 col-lg-4 d-flex"},kt=(0,s.uE)('<option value="correlation" data-v-948d3aa4>相關性</option><option value="dateN2O" selected data-v-948d3aa4>出版日期：新→舊</option><option value="dateO2N" data-v-948d3aa4>出版日期：舊→新</option><option value="priceH2L" data-v-948d3aa4>價格：高→低</option><option value="priceL2H" data-v-948d3aa4>價格：低→高</option><option value="nameA2Z" data-v-948d3aa4>名稱：A→Z</option><option value="nameZ2A" data-v-948d3aa4>名稱：Z→A</option>',7),Ct=[kt],St={class:"col-auto ms-auto",id:"display-mode"},Tt=i((()=>(0,s._)("i",{class:"bi bi-grid-3x3-gap-fill"},null,-1))),At=[Tt],It=["disabled"],$t=i((()=>(0,s._)("i",{class:"fa-solid fa-list"},null,-1))),Dt=[$t];function Nt(t,e,o,i,u,h){const g=(0,s.up)("router-link"),f=(0,s.up)("product-card"),_=(0,s.up)("detail-card");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("ul",d,[(0,s._)("li",{class:"list-group-item",onClick:e[0]||(e[0]=(0,a.iM)((t=>h.routeToFn("all")),["prevent"]))},p),(0,s._)("li",{class:"list-group-item",onClick:e[1]||(e[1]=(0,a.iM)((t=>h.routeToFn("all",!1,!1,!1,!0)),["prevent"]))},m),(0,s._)("li",{class:"list-group-item",onClick:e[2]||(e[2]=(0,a.iM)((t=>h.routeToFn("all",!1,!1,!1,!1,!0)),["prevent"]))},y),(0,s._)("li",v,[b,(0,s._)("ul",{class:(0,l.C_)(["collapse mt-2",["comic"===u.tempSearchQuery.category?"collapse show":""]]),id:"comicCollapse"},[(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e[3]||(e[3]=t=>h.routeToFn("comic"))},{default:(0,s.w5)((()=>[k,C])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e[4]||(e[4]=t=>h.routeToFn("comic",!1,!1,!1,!0))},{default:(0,s.w5)((()=>[S,T])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e[5]||(e[5]=t=>h.routeToFn("comic",!1,!1,!1,!1,!0))},{default:(0,s.w5)((()=>[A,I])),_:1})]),$,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.comicTags,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:"comic-"+e},[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#comicCollapse .show",onClick:e=>h.routeToFn("comic",t)},{default:(0,s.w5)((()=>[D,(0,s.Uk)(" "+(0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,s._)("li",N,[P,(0,s._)("ul",{class:(0,l.C_)(["collapse mt-2",["lightNovel"===u.tempSearchQuery.category?"collapse show":""]]),id:"lightNovelCollapse"},[(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e[6]||(e[6]=t=>h.routeToFn("lightNovel"))},{default:(0,s.w5)((()=>[q,Q])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e[7]||(e[7]=t=>h.routeToFn("lightNovel",!1,!1,!1,!0))},{default:(0,s.w5)((()=>[x,F])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e[8]||(e[8]=t=>h.routeToFn("lightNovel",!1,!1,!1,!1,!0))},{default:(0,s.w5)((()=>[L,U])),_:1})]),z,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.lightNovelTags,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:"lightNovel-"+e},[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#lightNovelCollapse .show",onClick:e=>h.routeToFn("lightNovel",t)},{default:(0,s.w5)((()=>[O,(0,s.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,s._)("li",B,[E,(0,s._)("ul",{class:(0,l.C_)(["collapse mt-2",["novel"===u.tempSearchQuery.category?"collapse show":""]]),id:"novelCollapse"},[(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e[9]||(e[9]=t=>h.routeToFn("novel"))},{default:(0,s.w5)((()=>[W,j])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e[10]||(e[10]=t=>h.routeToFn("novel",!1,!1,!1,!0))},{default:(0,s.w5)((()=>[M,H])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e[11]||(e[11]=t=>h.routeToFn("novel",!1,!1,!1,!1,!0))},{default:(0,s.w5)((()=>[Z,K])),_:1})]),Y,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.novelTags,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:"novel-"+e},[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#novelCollapse .show",onClick:e=>h.routeToFn("novel",t)},{default:(0,s.w5)((()=>[J,(0,s.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,s._)("li",R,[X,(0,s._)("ul",{class:(0,l.C_)(["collapse mt-2",["nonfiction"===u.tempSearchQuery.category?"collapse show":""]]),id:"nonfictionCollapse"},[(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e[12]||(e[12]=t=>h.routeToFn("nonfiction"))},{default:(0,s.w5)((()=>[V,G])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e[13]||(e[13]=t=>h.routeToFn("nonfiction",!1,!1,!1,!0))},{default:(0,s.w5)((()=>[tt,et])),_:1})]),(0,s._)("li",null,[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e[14]||(e[14]=t=>h.routeToFn("nonfiction",!1,!1,!1,!1,!0))},{default:(0,s.w5)((()=>[ot,st])),_:1})]),at,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.nonfictionTags,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:"nonfiction-"+e},[(0,s.Wm)(g,{class:"dropdown-item",to:"","data-bs-toggle":"collapse","data-bs-target":"#nonfictionCollapse .show",onClick:e=>h.routeToFn("nonfiction",t)},{default:(0,s.w5)((()=>[lt,(0,s.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))],2)]),(0,s._)("li",it,[rt,(0,s._)("ul",nt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.tempAuthorList,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:"author-"+e},[(0,s.Wm)(g,{class:"dropdown-item",to:"",onClick:e=>h.routeToFn("all",!1,t)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))])]),(0,s._)("li",ct,[dt,(0,s._)("ul",ut,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.tempPublisherList,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:"publisher-"+e},[(0,s.Wm)(g,{class:"dropdown-item",to:"",onClick:e=>h.routeToFn("all",!1,!1,t)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t),1)])),_:2},1032,["onClick"])])))),128))])])])]),(0,s._)("div",ht,[(0,s._)("div",pt,[(0,s._)("h4",gt,[u.tempSearchQuery.categoryCN?((0,s.wg)(),(0,s.iD)("span",ft,(0,l.zw)(u.tempSearchQuery.categoryCN),1)):(0,s.kq)("",!0),(0,s._)("span",null,(0,l.zw)(this.$route.query.search.split(" ").join(", ")),1),u.tempSearchQuery.ps?((0,s.wg)(),(0,s.iD)("span",mt,(0,l.zw)(u.tempSearchQuery.ps),1)):(0,s.kq)("",!0),""!==u.tempSearchQuery.search?((0,s.wg)(),(0,s.iD)("span",_t," 的搜尋結果")):(0,s.kq)("",!0)]),(0,s._)("div",wt,[(0,s._)("h4",yt,(0,l.zw)(h.filteredProducts.length)+" 筆",1)])]),(0,s._)("div",vt,[(0,s._)("div",bt,[(0,s.wy)((0,s._)("select",{class:"form-select","aria-label":"sort by","onUpdate:modelValue":e[15]||(e[15]=t=>u.sortBy=t)},Ct,512),[[a.bM,u.sortBy]])]),(0,s._)("div",St,[(0,s._)("button",{class:(0,l.C_)(["btn",{active:"grid"===u.displayMode}]),title:"Grid",onClick:e[16]||(e[16]=t=>u.displayMode="grid")},At,2),(0,s._)("button",{class:(0,l.C_)(["btn",{active:"list"===u.displayMode}]),title:"List",onClick:e[17]||(e[17]=t=>u.displayMode="list"),disabled:u.window.width<=768&&0!==u.window.width},Dt,10,It)])]),"grid"===u.displayMode?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,l.C_)(["row grid-container",{show:"grid"===this.displayMode}])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(h.filteredProducts,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col-6 col-md-4 col-xl-3 g-0 gy-0 d-flex",key:t.id},[(0,s.Wm)(f,{class:"mx-auto my-3 shadow-none search-product-card change","product-info":t},null,8,["product-info"])])))),128))],2)):(0,s.kq)("",!0),"list"===u.displayMode?((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,l.C_)(["mt-2 list-container",{show:"list"===this.displayMode}])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(h.filteredProducts,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"mb-3",key:t.id},[(0,s.Wm)(_,{class:"product-card-detail change","product-info":t},null,8,["product-info"])])))),128))],2)):(0,s.kq)("",!0)])])])}var Pt=o(7377);const qt=t=>((0,s.dD)("data-v-4f4a6624"),t=t(),(0,s.Cn)(),t),Qt={class:"card_container"},xt={class:"pic_box"},Ft=["src"],Lt={class:"info_container"},Ut=["title"],zt={class:"d-flex product_info"},Ot=["title"],Bt=["title"],Et=["title"],Wt={class:"des_short bg-light"},jt=(0,s.Uk)("... more"),Mt={class:"card_control"},Ht={class:"product_price ms-3"},Zt={key:0},Kt={class:"cart_btn"},Yt=["disabled"],Jt={key:0,class:"spinner-border spinner-border-sm d-inline-block mx-1",role:"status"},Rt=qt((()=>(0,s._)("span",{class:"visually-hidden"},"Loading...",-1))),Xt=[Rt],Vt={key:1,class:"fa-solid fa-cart-shopping","aria-hidden":"true"},Gt=(0,s.Uk)(" 加入購物車 "),te={key:0,class:"fa-regular fa-sun d-flex fs-4"},ee={key:1,class:"fa-solid fa-sun d-flex fs-4"};function oe(t,e,o,a,i,r){const n=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("div",Qt,[(0,s._)("div",xt,[(0,s.Wm)(n,{class:"w-100",to:`/product/${o.productInfo.id}`},{default:(0,s.w5)((()=>[(0,s._)("img",{class:"w-100",src:o.productInfo.images[0],alt:"產品圖片"},null,8,Ft)])),_:1},8,["to"])]),(0,s._)("div",Lt,[(0,s._)("p",{title:o.productInfo.title,class:"product_title"},(0,l.zw)(o.productInfo.title),9,Ut),(0,s._)("div",zt,[(0,s._)("p",{title:o.productInfo.author.join("、")},(0,l.zw)(o.productInfo.author.join("、")),9,Ot),(0,s._)("p",{class:"ms-5",title:o.productInfo.publisher},(0,l.zw)(o.productInfo.publisher),9,Bt),(0,s._)("p",{class:"",title:o.productInfo.pub_date},(0,l.zw)(t.$filters.date(o.productInfo.pub_date)),9,Et)]),(0,s._)("div",Wt,[(0,s._)("p",null,[(0,s.Uk)((0,l.zw)(o.productInfo.des_short)+" ",1),(0,s._)("span",null,[(0,s.Wm)(n,{to:`/product/${o.productInfo.id}`,class:""},{default:(0,s.w5)((()=>[jt])),_:1},8,["to"])])])]),(0,s._)("div",Mt,[(0,s._)("div",Ht,[(0,s._)("p",null,[(0,s.Uk)(" $ "+(0,l.zw)(o.productInfo.price)+" ",1),o.productInfo.price<o.productInfo.origin_price?((0,s.wg)(),(0,s.iD)("span",Zt,"$ "+(0,l.zw)(o.productInfo.origin_price),1)):(0,s.kq)("",!0)])]),(0,s._)("div",Kt,[(0,s._)("button",{class:"btn",onClick:e[0]||(e[0]=t=>r.addToCart(o.productInfo.id)),disabled:this.status.loadingItem===o.productInfo.id},[this.status.loadingItem===o.productInfo.id?((0,s.wg)(),(0,s.iD)("div",Jt,Xt)):((0,s.wg)(),(0,s.iD)("i",Vt)),Gt],8,Yt),(0,s._)("button",{class:"btn",onClick:e[1]||(e[1]=t=>r.addToFavor(o.productInfo.id))},[r.isFavorite?((0,s.wg)(),(0,s.iD)("i",ee)):((0,s.wg)(),(0,s.iD)("i",te))])])])])])}var se=o(8357),ae={data(){return{favorIndex:"",favorArr:JSON.parse(localStorage.getItem("favor"))||[],status:{loadingItem:""}}},props:{productInfo:{type:Object,default(){return{}}}},computed:{isFavorite(){const t=this.favorArr.indexOf(this.productInfo.id);return-1!==t}},methods:{addToCart:se.Xq,addToFavor:se.ag},mounted(){}},le=o(3744);const ie=(0,le.Z)(ae,[["render",oe],["__scopeId","data-v-4f4a6624"]]);var re=ie,ne=o(3863),ce=o.n(ne),de={components:{ProductCard:Pt.Z,DetailCard:re},data(){return{window:{width:0,height:0},displayMode:"grid",sortBy:"dateN2O",allProducts:[],comicTags:[],lightNovelTags:[],novelTags:[],nonfictionTags:[],tempProducts:[],tempSearchQuery:{tempCategoryCN:"",ps:""},tempPublisherList:[],tempAuthorList:[],favorArr:JSON.parse(localStorage.getItem("favor"))||[]}},watch:{sortBy(){console.log("sortBy",this.sortBy)},"window.width":function(){this.window.width<=768&&(this.displayMode="grid")},"$route.query":{handler:function(){this.tempSearchQuery=this.$route.query,"comic"===this.$route.query.category?(this.tempSearchQuery.categoryCN="漫畫, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):"lightNovel"===this.$route.query.category?(this.tempSearchQuery.categoryCN="輕小說, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):"novel"===this.$route.query.category?(this.tempSearchQuery.categoryCN="一般小說, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):"nonfiction"===this.$route.query.category?(this.tempSearchQuery.categoryCN="實用書, ",""===this.$route.query.search&&(this.tempSearchQuery.ps="全部")):""===this.$route.query.search&&"all"===this.$route.query.category&&(this.tempSearchQuery.categoryCN="全部 "),this.tempSearchQuery.isPopular?this.tempSearchQuery.ps="熱門":this.tempSearchQuery.isOnSale&&(this.tempSearchQuery.ps="特價"),this.tempSearchQuery.tag?this.tempSearchQuery.ps=this.tempSearchQuery.tag:this.tempSearchQuery.publisher?this.tempSearchQuery.ps=this.tempSearchQuery.publisher:this.tempSearchQuery.author&&(this.tempSearchQuery.ps=this.tempSearchQuery.author),window.scroll({top:0})},immediate:!0}},computed:{filteredProducts(){let t=[];if(this.filterByCategory(this.allProducts,this.tempSearchQuery.category),""===this.$route.query.search)t=this.$route.query.isPopular?this.matchPopularOrOnsale(this.tempProducts,!0):this.$route.query.isOnSale?this.matchPopularOrOnsale(this.tempProducts,!1,!0):this.$route.query.tag?this.matchTags(this.tempProducts,this.$route.query.tag):this.$route.query.publisher?this.matchPublisher(this.tempProducts,this.$route.query.publisher):this.$route.query.author?this.matchAuthor(this.tempProducts,this.$route.query.author):this.tempProducts;else{this.sortBy="correlation";const e=this.$route.query.search.trim().toLowerCase().replace(/\(/g,"\\(").replace(/\)/g,"\\)");this.tempSearchQuery.searchArr=e.split(" "),this.tempSearchQuery.searchArr.splice(0,0,e),console.log("arr",this.tempSearchQuery.searchArr),t=this.filterFn(this.tempProducts,this.tempSearchQuery.searchArr)}this.tempPublisherList=this.listAllPublisher(t),this.tempAuthorList=this.listAllAuthor(t);const e=[...new Set(t)];console.log("final result",e);let o=[];return"correlation"===this.sortBy?o=e:"dateN2O"===this.sortBy?o=this.sortByDate(e):"dateO2N"===this.sortBy?o=this.sortByDate(e).reverse():"priceH2L"===this.sortBy?o=this.sortByPrice(e):"priceL2H"===this.sortBy?o=this.sortByPrice(e).reverse():"nameA2Z"===this.sortBy?o=this.sortByName(e):"nameZ2A"===this.sortBy&&(o=this.sortByName(e).reverse()),console.log("After Sort",o),o}},methods:{handleResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},getProducts(){const t="https://vue3-course-api.hexschool.io/api/wakuwaku-api/products/all";this.$http.get(t).then((t=>{if(t.data.success){const e=Object.values(t.data.products);this.allProducts=e,this.comicTags=this.categoryAllTags(this.allProducts,"comic"),this.lightNovelTags=this.categoryAllTags(this.allProducts,"lightNovel"),this.novelTags=this.categoryAllTags(this.allProducts,"novel"),this.nonfictionTags=this.categoryAllTags(this.allProducts,"nonfiction")}}))},categoryAllTags(t,e){const o=[],s=t.filter((t=>t.category===e));0==s.length&&console.error("wrong category"),s.forEach((t=>{o.push(...t.tags)}));const a=[...new Set(o)];return a},listAllPublisher(t){const e=[];t.forEach((t=>{e.push(t.publisher)}));const o=[...new Set(e)];return o},listAllAuthor(t){const e=[];t.forEach((t=>{e.push(...t.author)}));const o=[...new Set(e)];return o},filterByCategory(t,e){this.tempProducts="all"===e?[...t]:t.filter((t=>t.category===e))},filterFn(t,e){const o=[];if(e){const s=[...e];s.forEach((e=>{const s=this.matchName(t,e);o.push(...s),console.log("match 標題",e,s)})),s.forEach((e=>{const s=this.matchSeries(t,e);o.push(...s),console.log("match 系列",e,s)})),s.forEach((e=>{const s=this.matchAuthor(t,e);o.push(...s),console.log("match 作者",e,s)})),s.forEach((e=>{const s=this.matchPublisher(t,e);o.push(...s),console.log("match 出版社",e,s)})),0==o.length&&s.forEach((e=>{const s=this.matchTags(t,e);o.push(...s),console.log("match tags",e,s)}))}return o},matchName(t,e){const o=t.filter((t=>(t.title.trim().toLowerCase(),t.title.match(e))));return o},matchSeries(t,e){const o=t.filter((t=>t.series.trim().toLowerCase().match(e)));return o},matchAuthor(t,e){const o=e.toLowerCase(),s=t.filter((t=>t.author.join().trim().toLowerCase().match(o)));return s},matchPublisher(t,e){const o=e.toLowerCase(),s=t.filter((t=>t.publisher.toLowerCase().match(o)));return s},matchTags(t,e){const o=t.filter((t=>t.tags.join().trim().toLowerCase().match(e)));return o},matchPopularOrOnsale(t,e,o){let s=[];return e?s=t.filter((t=>!0===t.is_popular)):o&&(s=t.filter((t=>t.price<t.origin_price))),s},routeToFn:se.ZP,sortByDate(t){const e=[...t];return e.sort(((t,e)=>t.pub_date>e.pub_date?-1:t.pub_date<e.pub_date?1:0)),e},sortByPrice(t){const e=[...t];return e.sort(((t,e)=>t.price>e.price?-1:t.price<e.price?1:0)),e},sortByName(t){const e=[...t];return e.sort(((t,e)=>t.title<e.title?-1:t.title>e.title?1:0)),e}},created(){window.addEventListener("resize",this.handleResize),this.handleResize;const t=document.querySelectorAll(".collapse");[...t].map((t=>new(ce())(t)));this.getProducts()},destroyed(){window.removeEventListener("resize",this.handleResize)},mounted(){}};const ue=(0,le.Z)(de,[["render",Nt],["__scopeId","data-v-948d3aa4"]]);var he=ue}}]);
//# sourceMappingURL=551.edbbf8f8.js.map