"use strict";(self["webpackChunkwakuwaku"]=self["webpackChunkwakuwaku"]||[]).push([[426],{8357:function(t,s,a){function l(t,s,a,l,i,r){const o={search:"",category:t};!1!==s&&(o.tag=s),!1!==a&&(o.author=a),!1!==l&&(o.publisher=l),!0===i&&(o.isPopular=!0),!0===r&&(o.isOnSale=!0),this.$router.push({path:"/search",query:o})}function i(t){console.log("add or remove favorites",t),this.favorArr=JSON.parse(localStorage.getItem("favor"))||[];const s=this.favorArr.indexOf(t);-1===s?this.favorArr.push(t):this.favorArr.splice(s,1),localStorage.setItem("favor",JSON.stringify(this.favorArr))}function r(t){console.log("add to cart",t);const s="https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart";this.status.loadingItem=t;const a={product_id:t,qty:1};this.$http.post(s,{data:a}).then((t=>{this.status.loadingItem="",this.$emitter.emit("cartsUpdate",{}),console.log(t)}))}a.d(s,{Xq:function(){return r},ZP:function(){return l},ag:function(){return i}})},3770:function(t,s,a){a.r(s),a.d(s,{default:function(){return st}});var l=a(6252),i=a(3577),r=a(9963);const o=t=>((0,l.dD)("data-v-19f4abbe"),t=t(),(0,l.Cn)(),t),e={class:"container mt-3"},c={class:"row justify-content-center"},n={class:"col-12"},d=o((()=>(0,l._)("h1",{class:"fw-bold px-2",style:{color:"#ffbf00"}},"收藏商品",-1))),u={class:"lg-list d-lg-none"},h=o((()=>(0,l._)("div",{class:"w-100 lg-list-th"},null,-1))),g={key:0},p=o((()=>(0,l._)("div",{class:"lg-list-item d-flex flex-row p-2 fs-3 fw-bold",style:{color:"gray"}}," 目前沒有收藏的商品... ",-1))),f={class:"d-flex justify-content-center mt-5"},v=(0,l.Uk)(" 前往商店 "),_=o((()=>(0,l._)("i",{class:"bi bi-arrow-bar-right"},null,-1))),w=["src"],b={class:"lg-list-item-info px-2 w-100"},k={class:"px-2"},m={class:"px-2 my-1"},y={class:"text-danger"},x={key:0,class:"text-decoration-line-through text-secondary me-2"},D={class:"lg-list-item-btn"},I=["onClick","disabled"],C=o((()=>(0,l._)("i",{class:"fa-solid fa-cart-arrow-down"},null,-1))),A=[C],O=["onClick"],$=o((()=>(0,l._)("i",{class:"bi bi-x"},null,-1))),S=[$],q={key:0,class:"lg-list-item flex-row d-none d-lg-block",style:{"min-height":"50vh"}},z=o((()=>(0,l._)("div",{class:"w-100",style:{height:"1rem","background-color":"rgb(251 164 59)"}},null,-1))),U=o((()=>(0,l._)("p",{class:"px-2 mt-3 fs-3 fw-bold",style:{color:"gray"}}," 目前沒有收藏的商品... ",-1))),J={class:"d-flex justify-content-center mt-5"},M=(0,l.Uk)(" 前往商店 "),N=o((()=>(0,l._)("i",{class:"bi bi-arrow-bar-right"},null,-1))),P={key:1,class:"table d-none d-lg-table"},W=o((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"col-2"}),(0,l._)("th",{class:"col-5"},"品名"),(0,l._)("th",{class:"col-2"},"價格"),(0,l._)("th",{class:"col-2"},[(0,l._)("div",null,"加入購物車")]),(0,l._)("th",{class:"col-1"},[(0,l._)("div",null,"刪除")])])],-1))),j={class:""},F=["src"],T={class:"text-danger"},E={key:0,class:"text-secondary text-decoration-line-through"},H=["onClick","disabled"],K=o((()=>(0,l._)("i",{class:"fa-solid fa-cart-arrow-down"},null,-1))),X=[K],Y=["onClick"],Z=o((()=>(0,l._)("i",{class:"bi bi-x"},null,-1))),L=[Z],B={key:0,class:"",style:{"min-height":"50vh"}};function G(t,s,a,o,C,$){const K=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",e,[(0,l._)("div",c,[(0,l._)("div",n,[d,(0,l._)("div",u,[h,0===C.products.length?((0,l.wg)(),(0,l.iD)("div",g,[p,(0,l._)("div",f,[(0,l.Wm)(K,{class:"btn text-white fw-semibold shadow-none",to:"/search?search=&category=all",style:{"background-color":"rgb(251 164 59)"}},{default:(0,l.w5)((()=>[v,_])),_:1})])])):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(C.products,(t=>((0,l.wg)(),(0,l.iD)("div",{class:"lg-list-item d-flex flex-row p-2",key:t.id},[(0,l._)("div",null,[(0,l.Wm)(K,{to:"#"},{default:(0,l.w5)((()=>[(0,l._)("img",{class:"product-img",src:t.images[0],alt:"product pic"},null,8,w)])),_:2},1024)]),(0,l._)("div",b,[(0,l._)("div",k,[(0,l.Wm)(K,{class:"fs-5",to:"#"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(t.title),1)])),_:2},1024)]),(0,l._)("div",m,[(0,l._)("div",y,[(0,l.Uk)(" $"+(0,i.zw)(t.price)+" ",1),t.origin_price>t.price?((0,l.wg)(),(0,l.iD)("span",x,"$"+(0,i.zw)(t.origin_price),1)):(0,l.kq)("",!0)])]),(0,l._)("div",D,[(0,l._)("button",{class:"btn cart-btn",onClick:(0,r.iM)((s=>(C.cartIDs.push(t.id),$.addToCart(t.id))),["prevent"]),disabled:-1!==C.cartIDs.indexOf(t.id)},A,8,I),(0,l._)("button",{class:"btn btn-outline-danger",onClick:(0,r.iM)((s=>$.removeFavor(t)),["prevent"])},S,8,O)])])])))),128))]),0===C.products.length?((0,l.wg)(),(0,l.iD)("div",q,[z,U,(0,l._)("div",J,[(0,l.Wm)(K,{class:"btn text-white fw-semibold shadow-none",to:"/search?search=&category=all",style:{"background-color":"rgb(251 164 59)"}},{default:(0,l.w5)((()=>[M,N])),_:1})])])):((0,l.wg)(),(0,l.iD)("table",P,[W,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(C.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,[(0,l._)("div",j,[(0,l._)("img",{class:"product-img",src:t.images[0],alt:""},null,8,F)])]),(0,l._)("td",null,[(0,l._)("p",null,(0,i.zw)(t.title),1)]),(0,l._)("td",null,[(0,l._)("p",T,[(0,l.Uk)(" $"+(0,i.zw)(t.price)+"  ",1),t.origin_price>t.price?((0,l.wg)(),(0,l.iD)("span",E,"$"+(0,i.zw)(t.origin_price),1)):(0,l.kq)("",!0)])]),(0,l._)("td",null,[(0,l._)("div",null,[(0,l._)("button",{class:"btn w-50 cart-btn",onClick:(0,r.iM)((s=>(C.cartIDs.push(t.id),$.addToCart(t.id))),["prevent"]),disabled:-1!==C.cartIDs.indexOf(t.id)},X,8,H)])]),(0,l._)("td",null,[(0,l._)("div",null,[(0,l._)("button",{class:"btn btn-outline-danger",onClick:(0,r.iM)((s=>$.removeFavor(t)),["prevent"])},L,8,Y)])])])))),128)),C.products.length<=2?((0,l.wg)(),(0,l.iD)("div",B)):(0,l.kq)("",!0)])]))])])])}var Q=a(8357),R={data(){return{isLoading:!1,favorArr:JSON.parse(localStorage.getItem("favor"))||[],products:[],cartIDs:[],status:{loadingItem:""}}},watch:{"status.loadingItem"(){console.log("product array change!")}},computed:{},created(){this.getCartIDs(),this.favorArr.forEach(((t,s)=>{this.getProduct(t,s)})),console.log("Arr",this.favorArr)},methods:{getProduct(t,s){const a=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/product/${t}`;this.$http.get(a).then((t=>{this.products.splice(s,0,t.data.product)}))},getCartIDs(){this.cartIDs=[];const t="https://vue3-course-api.hexschool.io/api/wakuwaku-api/cart";this.$http.get(t).then((t=>{t.data.data.carts.forEach((t=>{this.cartIDs.push(t.product_id)})),console.log("cart",this.cartIDs)}))},removeFavor(t){const s=this.favorArr.indexOf(t.id),a=this.products.indexOf(t);this.favorArr.splice(s,1),this.products.splice(a,1),localStorage.setItem("favor",JSON.stringify(this.favorArr))},addToCart:Q.Xq,pushCart(t){this.cartIDs.push(t),console.log("id",this.cartIDs)}}},V=a(3744);const tt=(0,V.Z)(R,[["render",G],["__scopeId","data-v-19f4abbe"]]);var st=tt}}]);
//# sourceMappingURL=426.d283f7b6.js.map