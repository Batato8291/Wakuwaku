"use strict";(self["webpackChunkwakuwaku"]=self["webpackChunkwakuwaku"]||[]).push([[741],{1339:function(t,e,s){var a=s(7424),l=s.n(a);e["Z"]={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(l())(this.$refs.modal)}}},2741:function(t,e,s){s.r(e),s.d(e,{default:function(){return at}});var a=s(6252),l=s(3577);const d=t=>((0,a.dD)("data-v-5a457e70"),t=t(),(0,a.Cn)(),t),r={class:"container"},o=(0,a.uE)('<div data-v-5a457e70><p class="fs-1 fw-bold text-center" style="color:#faa11f;" data-v-5a457e70>確認訂單</p><div class="col-12 col-lg-10 mx-lg-auto" data-v-5a457e70><ul class="multi-steps" data-v-5a457e70><li class="active" id="progressbar_cart" data-v-5a457e70><span data-v-5a457e70>購物車</span></li><li class="active" id="progressbar_order" data-v-5a457e70><span data-v-5a457e70>訂單資料</span></li><li class="active" id="progressbar_check" data-v-5a457e70><span data-v-5a457e70>確認訂單</span></li><li id="progressbar_done" data-v-5a457e70><span data-v-5a457e70>完成訂單</span></li></ul></div></div>',1),i={class:"d-flex justify-content-center flex-wrap"},n={class:"col-12 col-lg-5 px-3"},c=d((()=>(0,a._)("div",{class:"mb-1",style:{height:"0.5rem","background-color":"rgba(255, 173, 59, 0.856)"}},null,-1))),u=d((()=>(0,a._)("div",{class:"mb-2 mx-1",style:{"border-bottom":"2px solid #535353"}},[(0,a._)("p",{class:"fs-3 my-1 text-center"},"訂單明細")],-1))),h={class:"lg-list"},p={class:"product-img"},_=["src"],v={class:"w-100 ps-3"},m={class:"row h-100 p-0"},w={class:"col-9 py-1"},f={class:"fs-5 m-0"},g={class:"mb-1"},b={class:"col-3 d-flex align-items-center justify-content-end"},y={class:"row mt-2 px-2 justify-content-end text-end"},x=d((()=>(0,a._)("div",{class:"col-3"},"小計：",-1))),k={class:"col-3"},$={class:"row px-2 justify-content-end text-end"},z=d((()=>(0,a._)("div",{class:"col-3"},"運費：",-1))),M={class:"col-3"},L=d((()=>(0,a._)("hr",{class:"my-2",style:{"border-color":"#53535363",opacity:"1"}},null,-1))),D={class:"row mt-2 mb-3 px-2 justify-content-end text-end fw-bold"},C=d((()=>(0,a._)("div",{class:"col-5"},"應付金額：",-1))),P={class:"col-3"},j={class:"col-12 col-lg-5 px-3"},F=d((()=>(0,a._)("div",{class:"mb-1",style:{height:"0.5rem","background-color":"rgba(255, 173, 59, 0.856)"}},null,-1))),O=d((()=>(0,a._)("div",{class:"mx-1 px-2",style:{"border-bottom":"2px solid #535353"}},[(0,a._)("p",{class:"fs-3 my-1 text-center"},"訂購人資訊")],-1))),S={class:"table px-2"},Z=d((()=>(0,a._)("th",null,"訂單時間",-1))),A=d((()=>(0,a._)("th",null,"訂單編號",-1))),E=d((()=>(0,a._)("th",null,"收件人",-1))),H=d((()=>(0,a._)("th",null,"電話",-1))),I=d((()=>(0,a._)("th",null,"E-mail",-1))),Y=d((()=>(0,a._)("th",null,"收件人地址",-1))),q=d((()=>(0,a._)("th",null,"付款方式",-1))),K=d((()=>(0,a._)("th",null,"備註",-1))),R=d((()=>(0,a._)("th",null,"付款狀態",-1))),T={key:0,class:"text-success"},B={key:1,class:"text-danger"},G={class:"d-flex justify-content-end mt-2 pe-2"},J={class:"modal fade",tabindex:"-1",ref:"modal"},N={class:"modal-dialog modal-dialog-centered"},Q={class:"modal-content"},U=d((()=>(0,a._)("div",{class:"modal-body p-4 text-center fs-5 fw-bold"}," 訂單尚未付款，確定要離開嗎？ ",-1))),V={class:"leave-btn-group"};function W(t,e,s,d,W,X){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[o,(0,a._)("div",i,[(0,a._)("div",n,[c,u,(0,a._)("div",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(W.order.products,(t=>((0,a.wg)(),(0,a.iD)("div",{class:"lg-list-item d-flex flex-row p-2 list-item-border",key:t.product.product_id},[(0,a._)("div",p,[(0,a._)("img",{class:"",src:t.product.images[0],alt:"product image"},null,8,_)]),(0,a._)("div",v,[(0,a._)("div",m,[(0,a._)("div",w,[(0,a._)("p",f,(0,l.zw)(t.product.title),1),(0,a._)("div",g,"x "+(0,l.zw)(t.qty),1)]),(0,a._)("div",b," $ "+(0,l.zw)(Math.round(10*t.final_total)/10),1)])])])))),128))]),(0,a._)("div",y,[x,(0,a._)("div",k,"$ "+(0,l.zw)(Math.round(W.order.total)),1)]),(0,a._)("div",$,[z,(0,a._)("div",M,"$ "+(0,l.zw)(W.order.user.deliveryFee),1)]),L,(0,a._)("div",D,[C,(0,a._)("div",P," $ "+(0,l.zw)(Math.round(W.order.total+W.order.user.deliveryFee)),1)])]),(0,a._)("div",j,[F,O,(0,a._)("table",S,[(0,a._)("tbody",null,[(0,a._)("tr",null,[Z,(0,a._)("td",null,(0,l.zw)(new Date(1e3*W.order.create_at).toLocaleDateString()),1)]),(0,a._)("tr",null,[A,(0,a._)("td",null,(0,l.zw)(W.order.id),1)]),(0,a._)("tr",null,[E,(0,a._)("td",null,(0,l.zw)(W.order.user.name),1)]),(0,a._)("tr",null,[H,(0,a._)("td",null,(0,l.zw)(W.order.user.tel),1)]),(0,a._)("tr",null,[I,(0,a._)("td",null,(0,l.zw)(W.order.user.email),1)]),(0,a._)("tr",null,[Y,(0,a._)("td",null,(0,l.zw)(W.addressSaw),1)]),(0,a._)("tr",null,[q,(0,a._)("td",null,(0,l.zw)(W.paymentMeth),1)]),(0,a._)("tr",null,[K,(0,a._)("td",null,(0,l.zw)(W.order.message),1)]),(0,a._)("tr",null,[R,(0,a._)("td",null,[W.order.is_paid?((0,a.wg)(),(0,a.iD)("span",T,"已付款")):((0,a.wg)(),(0,a.iD)("span",B,"未付款"))])])])]),(0,a._)("div",G,[(0,a._)("button",{class:"btn btn-danger",onClick:e[0]||(e[0]=t=>X.toPay(W.id))},"前往付款")])])])]),(0,a._)("div",J,[(0,a._)("div",N,[(0,a._)("div",Q,[U,(0,a._)("div",V,[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=t=>W.toPage="")}," 取消 "),(0,a._)("button",{type:"button",class:"btn",onClick:e[2]||(e[2]=t=>X.confirmLeaveFn())}," 確定 ")])])])],512)],64)}var X=s(1339),tt={data(){return{id:"",modal:{},order:{user:{deliveryFee:""}},paymentMeth:"",addressSaw:"",toPage:"",confirmLeave:!1}},mixins:[X.Z],emits:["temp-selection"],props:["filtered-list","tag-lists"],watch:{"order.user.payment":{handler:function(){const t=this.order.user.payment;"credit_card"==t?this.paymentMeth="信用卡付款":"atm"==t?this.paymentMeth="ATM轉帳":"mart"==t?this.paymentMeth="超商取貨付款":"home_delivery"==t&&(this.paymentMeth="宅配付款")}},"order.user.address":{handler:function(){const t=this.order.user.address;this.addressSaw=t.replace(/\s*/g,"")}}},methods:{getOrder(t){const e=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/order/${t}`;this.$http.get(e).then((e=>{e.data.success&&e.data.order&&(this.order=e.data.order,this.order.is_paid&&(this.confirmLeave=!0,this.$router.push(`/order-done/${t}`)))}))},toPay(t){const e=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/pay/${t}`;this.$http.post(e).then((e=>{e.data.success&&(this.confirmLeave=!0,this.$router.push(`/order-done/${t}`))}))},confirmLeaveFn(){this.confirmLeave=!0,this.hideModal(),this.$router.push(this.toPage)},getAllOrder(t){const e=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/orders?page=${t}`;this.$http.get(e).then()}},beforeRouteLeave(t,e){if(this.toPage=t.fullPath,"CheckOut"!==t.name&&!1===this.order.is_paid&&!1===this.confirmLeave)return this.showModal(),!1},created(){this.id=this.$route.params.orderId,this.getOrder(this.id)}},et=s(3744);const st=(0,et.Z)(tt,[["render",W],["__scopeId","data-v-5a457e70"]]);var at=st}}]);
//# sourceMappingURL=741.044f8369.js.map