"use strict";(self["webpackChunkwakuwaku"]=self["webpackChunkwakuwaku"]||[]).push([[35],{1339:function(e,t,s){var l=s(7424),a=s.n(l);t["Z"]={methods:{showModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(a())(this.$refs.modal)}}},6035:function(e,t,s){s.r(t),s.d(t,{default:function(){return le}});var l=s(6252),a=s(3577);const d=e=>((0,l.dD)("data-v-14bde2d0"),e=e(),(0,l.Cn)(),e),o={class:"container"},r=(0,l.uE)('<div data-v-14bde2d0><p class="fs-1 fw-bold text-center" style="color:#faa11f;" data-v-14bde2d0>確認訂單</p><div class="col-12 col-lg-10 mx-lg-auto" data-v-14bde2d0><ul class="multi-steps" data-v-14bde2d0><li class="active" id="progressbar_cart" data-v-14bde2d0><span data-v-14bde2d0>購物車</span></li><li class="active" id="progressbar_order" data-v-14bde2d0><span data-v-14bde2d0>訂單資料</span></li><li class="active" id="progressbar_check" data-v-14bde2d0><span data-v-14bde2d0>確認訂單</span></li><li id="progressbar_done" data-v-14bde2d0><span data-v-14bde2d0>完成訂單</span></li></ul></div></div>',1),i={class:"d-flex justify-content-center"},n={class:"col-12 col-lg-5 px-3"},c=d((()=>(0,l._)("div",{class:"mb-1",style:{height:"0.5rem","background-color":"rgba(255, 173, 59, 0.856)"}},null,-1))),u=d((()=>(0,l._)("div",{class:"mb-2 mx-1",style:{"border-bottom":"2px solid #535353"}},[(0,l._)("p",{class:"fs-3 my-1 text-center"},"訂單明細")],-1))),h={class:"lg-list"},p={class:"product-img"},_=["src"],v={class:"w-100 ps-3"},m={class:"row h-100 p-0"},b={class:"col-9 py-1"},g={class:"fs-5 m-0"},w={class:"mb-1"},f={class:"col-3 d-flex align-items-center justify-content-end"},y={class:"row mt-2 px-2 justify-content-end text-end"},x=d((()=>(0,l._)("div",{class:"col-3"},"小計：",-1))),k={class:"col-3"},$={class:"row px-2 justify-content-end text-end"},M=d((()=>(0,l._)("div",{class:"col-3"},"運費：",-1))),z={class:"col-3"},L=d((()=>(0,l._)("hr",{class:"my-2",style:{"border-color":"#53535363",opacity:"1"}},null,-1))),D={class:"row mt-2 mb-3 px-2 justify-content-end text-end fw-bold"},C=d((()=>(0,l._)("div",{class:"col-5"},"應付金額：",-1))),P={class:"col-3"},j={class:"col-12 col-lg-5 px-3"},F=d((()=>(0,l._)("div",{class:"mb-1",style:{height:"0.5rem","background-color":"rgba(255, 173, 59, 0.856)"}},null,-1))),O=d((()=>(0,l._)("div",{class:"mx-1 px-2",style:{"border-bottom":"2px solid #535353"}},[(0,l._)("p",{class:"fs-3 my-1 text-center"},"訂購人資訊")],-1))),S={class:"table px-2"},A=d((()=>(0,l._)("th",null,"訂單時間",-1))),Z=d((()=>(0,l._)("th",null,"訂單編號",-1))),E=d((()=>(0,l._)("th",null,"收件人",-1))),H=d((()=>(0,l._)("th",null,"電話",-1))),I=d((()=>(0,l._)("th",null,"E-mail",-1))),R=d((()=>(0,l._)("th",null,"收件人地址",-1))),Y=d((()=>(0,l._)("th",null,"付款方式",-1))),q=d((()=>(0,l._)("th",null,"備註",-1))),K=d((()=>(0,l._)("th",null,"付款狀態",-1))),T={key:0,class:"text-success"},U={key:1,class:"text-danger"},B={class:"d-flex justify-content-end mt-2 pe-2"},G={class:"modal fade",tabindex:"-1",ref:"modal"},J={class:"modal-dialog modal-dialog-centered"},N={class:"modal-content"},Q=d((()=>(0,l._)("div",{class:"modal-body p-4 text-center fs-5 fw-bold"}," 訂單尚未付款，確定要離開嗎？ ",-1))),V={class:"leave-btn-group"};function W(e,t,s,d,W,X){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",o,[r,(0,l._)("div",i,[(0,l._)("div",n,[c,u,(0,l._)("div",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(W.order.products,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"lg-list-item d-flex flex-row p-2 list-item-border",key:e.product.product_id},[(0,l._)("div",p,[(0,l._)("img",{class:"",src:e.product.images[0],alt:"product image"},null,8,_)]),(0,l._)("div",v,[(0,l._)("div",m,[(0,l._)("div",b,[(0,l._)("p",g,(0,a.zw)(e.product.title),1),(0,l._)("div",w,"x "+(0,a.zw)(e.qty),1)]),(0,l._)("div",f," $ "+(0,a.zw)(Math.round(10*e.final_total)/10),1)])])])))),128))]),(0,l._)("div",y,[x,(0,l._)("div",k,"$ "+(0,a.zw)(Math.round(W.order.total)),1)]),(0,l._)("div",$,[M,(0,l._)("div",z,"$ "+(0,a.zw)(W.order.user.deliveryFee),1)]),L,(0,l._)("div",D,[C,(0,l._)("div",P," $ "+(0,a.zw)(Math.round(W.order.total+W.order.user.deliveryFee)),1)])]),(0,l._)("div",j,[F,O,(0,l._)("table",S,[(0,l._)("tbody",null,[(0,l._)("tr",null,[A,(0,l._)("td",null,(0,a.zw)(new Date(1e3*W.order.create_at).toLocaleDateString()),1)]),(0,l._)("tr",null,[Z,(0,l._)("td",null,(0,a.zw)(W.order.id),1)]),(0,l._)("tr",null,[E,(0,l._)("td",null,(0,a.zw)(W.order.user.name),1)]),(0,l._)("tr",null,[H,(0,l._)("td",null,(0,a.zw)(W.order.user.tel),1)]),(0,l._)("tr",null,[I,(0,l._)("td",null,(0,a.zw)(W.order.user.email),1)]),(0,l._)("tr",null,[R,(0,l._)("td",null,(0,a.zw)(W.addressSaw),1)]),(0,l._)("tr",null,[Y,(0,l._)("td",null,(0,a.zw)(W.paymentMeth),1)]),(0,l._)("tr",null,[q,(0,l._)("td",null,(0,a.zw)(W.order.message),1)]),(0,l._)("tr",null,[K,(0,l._)("td",null,[W.order.is_paid?((0,l.wg)(),(0,l.iD)("span",T,"已付款")):((0,l.wg)(),(0,l.iD)("span",U,"未付款"))])])])]),(0,l._)("div",B,[(0,l._)("button",{class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>X.test&&X.test(...e))},"MODAL"),(0,l._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=e=>X.toPay(W.id))},"前往付款")])])])]),(0,l._)("div",G,[(0,l._)("div",J,[(0,l._)("div",N,[Q,(0,l._)("div",V,[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[2]||(t[2]=e=>W.toPage="")}," 取消 "),(0,l._)("button",{type:"button",class:"btn",onClick:t[3]||(t[3]=e=>X.confirmLeaveFn())}," 確定 ")])])])],512)],64)}var X=s(1339),ee={data(){return{id:"",modal:{},order:{user:{deliveryFee:""}},paymentMeth:"",addressSaw:"",toPage:"",confirmLeave:!1}},mixins:[X.Z],emits:["temp-selection"],props:["filtered-list","tag-lists"],watch:{"order.user.payment":{handler:function(){const e=this.order.user.payment;"credit_card"==e?this.paymentMeth="信用卡付款":"atm"==e?this.paymentMeth="ATM轉帳":"mart"==e?this.paymentMeth="超商取貨付款":"home_delivery"==e&&(this.paymentMeth="宅配付款")}},"order.user.address":{handler:function(){const e=this.order.user.address;this.addressSaw=e.replace(/\s*/g,"")}}},methods:{getOrder(e){const t=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/order/${e}`;this.$http.get(t).then((t=>{t.data.success&&t.data.order?(this.order=t.data.order,console.log(this.order),this.order.is_paid&&(this.confirmLeave=!0,this.$router.push(`/order-done/${e}`))):console.log("訂單錯物")}))},toPay(e){const t=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/pay/${e}`;this.$http.post(t).then((t=>{t.data.success&&(this.confirmLeave=!0,this.$router.push(`/order-done/${e}`))}))},confirmLeaveFn(){this.confirmLeave=!0,this.hideModal(),this.$router.push(this.toPage)},test(){console.log("eeeeee",this.$route),this.showModal()},getAllOrder(e){const t=`https://vue3-course-api.hexschool.io/api/wakuwaku-api/orders?page=${e}`;this.$http.get(t).then((e=>{console.log("all",e)}))}},beforeRouteUpdate(e,t){console.log("update page",e,t)},beforeRouteLeave(e,t){if(console.log("leave page....",this.confirmLeave,e,t),this.toPage=e.fullPath,"CheckOut"!==e.name&&!1===this.order.is_paid&&!1===this.confirmLeave)return this.showModal(),!1},created(){this.id=this.$route.params.orderId,console.log(this.id),this.getOrder(this.id)}},te=s(3744);const se=(0,te.Z)(ee,[["render",W],["__scopeId","data-v-14bde2d0"]]);var le=se}}]);
//# sourceMappingURL=35.cbe255b0.js.map